"use strict";function EntitlementService(a,b,c){function d(a,b,c,d){var e=new RegExp("^"+b+".*"),a=_.filter(a,function(a){return a.actionId.match(e)}),f=_.filter(a,function(a){return c.indexOf(a.status.toUpperCase())>-1});return d===!0?f.length===a.length:f.length>0}var e=this,f=!0,g=!1;this.getEntitlementsForDocument=function(a,b,d){var f=[],g=c.getEntitlementUsageUserId(d);return _.forEach(a.formats,function(c){f.push({userId:g,resourceId:"Document/"+a.productName+"/"+b,actionId:"download/"+c.toLowerCase()})}),f.push({userId:g,resourceId:"Document/"+a.productName+"/"+b,actionId:"edit"}),e.get(f)},this.get=function(c){return a.post(b+"/entitlements",c).then(function(a){return a.data})},this.isEditAllowed=function(a){return d(a,"edit",["GRANTED"],g)},this.isProposePurchase=function(a){return d(a,"download",["DENIED"],f)},this.canDownloadFormat=function(a,b){var c=new RegExp("download\\/(\\*|"+b+")","i");return _.some(a,function(a){return"GRANTED"===a.status.toUpperCase()&&a.actionId.match(c)})}}function SessionService(a,b,c,d){"ngInject";var e=c("documentBySessionId");this.getDocument=function(c){if(e.get(c))return e.get(c);var f=a.get(d+"/documents/"+c).then(function(a){var c=a.data;return c&&c.length>0?c[0]:b.reject()});return e.put(c,f),f},this.getPreviewPages=function(b){return a.get(d+"/preview/"+b).then(function(a){var b=a.data,c=_.map(b,function(a){return d+"/"+a});return c})},this.updateCustomTitle=function(b,c){return a.put(d+"/documents/"+b,{customTitle:c}).then(function(a){var b=a.data;return b})},this.clone=function(b,c){return a.post(d+"/documents?clone="+encodeURIComponent(b)+"&customTitle="+encodeURIComponent(c)).then(function(a){var b=a.data;return b})},this["delete"]=function(b){return a["delete"](d+"/documents/"+b).then(function(a){return a.data})},this.getFirstPreviewPage=function(a){return b.resolve(d+"/preview/"+a+"/0")},this.claim=function(b){return a.post(d+"/document/"+b+"/claim")},this.forwardDocument=function(b,c){return a.post(d+"/documents/"+b+"/forward",c)}}function UserService(a,b){var c;this.getMe=function(){return c?c:c=b.get(a+"/users/me").then(function(a){return a.data},function(){return void 0})}}function HeaderModelService(a){this.init=function(){a.headerModel=a.headerModel||{}},this.setTitle=function(b){a.documentTitle=b},this.setSessionId=function(b){a.headerModel.sid=b},this.setSource=function(b){a.eventSource=b}}function ProjectionService(a,b){"ngInject";this.get=function(c){return a.get(b+"/sets/"+c).then(function(a){return a.data})}}function DocumentControllerService(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"ngInject";var q=this,r=c.instant,s={cssClass:"details-action-menu-edit",id:"edit",label:r("document.details.edit")},t={cssClass:"details-action-menu-clone",id:"clone",label:r("document.details.cloneDocumentLabel")},u={cssClass:"details-action-menu-delete",id:"delete",label:r("document.details.deleteDocumentLabel")};this.decorateWithPromises=function(c,g){function i(a){var b=k.indexOf(a);0>b&&k.push(a)}j.setSessionId(g);var k=[];o.disableActionMenu(),c.enableActionMenuEdit=function(){i(s)},c.enableActionMenuClone=function(){i(t)},c.enableActionMenuDelete=function(){i(u)},c.showActionMenu=function(){o.enableActionMenu(k)};var l=c.userPromise=q.getUserPromise().then(function(a){return c.user=a,a}),p=c.documentPromise=q.getDocumentPromise(g).then(function(a){return a&&(c.document=a,j.setTitle(a.title)),a}),v=c.entitlementsPromise=b.all([l,p]).then(function(a){var b=a[0],c=a[1];return b&&!c.userId&&("true"===d.autoClaim?claimSession(g).then(function(){c&&b&&(c.userId=b.id)}):q.claimDialogShown||(q.claimDialogShown=!0,f.confirmClaimSession().then(function(a){a&&q.claimSession(g).then(function(){c&&b&&(c.userId=b.id),h.pop("success",r("document.dialog.documentClaim.successToast"))})})["finally"](function(){q.claimDialogShown=!1}))),q.getEntitlementsPromise(c,g,b)},function(b){b&&403==b.httpStatus?q.getUserPromise().then(function(a){return a?n.emit("document-preview","access:unauthorized"):n.emit("document-preview","access:unauthenticated",{sessionId:g}),a},function(){n.emit("document-preview","access:unauthenticated",{sessionId:g})}):(a.error("Could not obtain session document:",b),e.path("/").replace())});v.then(function(a){return c.editAllowed=m.isEditAllowed(a),c.editAllowed&&c.enableActionMenuEdit(),a})["finally"](function(){c.showActionMenu()})},this.getUserPromise=function(){return k.getMe()},this.getDocumentPromise=function(a){return l.getDocument(a)},this.claimSession=function(a){return l.claim(a)},this.getEntitlementsPromise=function(a,b,c){return m.getEntitlementsForDocument(a,b,c)},this.provideUserAndDocumentAndEntitlements=function(c,g){function p(a){var b=w.indexOf(a);0>b&&w.push(a)}function q(a){f.confirmClaimSession().then(function(){v(a).then(function(){h.pop("success",r("document.dialog.documentClaim.successToast"))})})}function v(a){return l.claim(a).then(function(){c.document&&c.user&&(c.document.userId=c.user.id)})}a.warn("DEPRECATION WARNING: provideUserAndDocumentAndEntitlements"),j.setSessionId(g);var w=[];o.disableActionMenu(),c.enableActionMenuEdit=function(){p(s)},c.enableActionMenuClone=function(){p(t)},c.enableActionMenuDelete=function(){p(u)},c.showActionMenu=function(){o.enableActionMenu(w)};var x=c.userPromise=k.getMe().then(function(a){return c.user=a,a}),y=c.documentPromise=l.getDocument(g);c.entitlementsPromise=b.all([x,y]).then(function(a){var b=a[0],e=a[1];return c.user=b,c.document=e,e&&(j.setTitle(e.title),b&&!e.userId&&("true"===d.autoClaim?v(g):q(g)),i.trackEvent("preview","preview","publication:"+e.canonicalName)),m.getEntitlementsForDocument(e,g,b)},function(b){b&&403===b.httpStatus?c.user?n.emit("document-preview","access:unauthorized"):n.emit("document-preview","access:unauthenticated",{sessionId:g}):(a.error("Could not obtain session document:",b),e.path("/").replace())}),c.entitlementsPromise.then(function(a){c.editAllowed=m.isEditAllowed(a),c.editAllowed&&c.enableActionMenuEdit()})["finally"](function(){c.showActionMenu()})},this.openDownloadNotEntitledDialog=function(a,b,c){var d=p.getProducts(c);f.openDownloadNotEntitledDialog(a).then(function(){d.then(function(a){var d=p.findBestProduct(a,!1);n.emit("document-details","buynow:click",{ratePlanId:d.ratePlanId,resourceName:c,sessionId:b})})})},this.openInvalidDocumentDialog=function(a){f.openInvalidDocumentDialog().then(function(){q.createDocument(a)})},this.createDocument=function(a){n.emit("document-details","document:create",{canonicalName:a})},this.editDocument=function(a,b,c,d){d||i.trackEvent("dashboard document details page","edit information in interview","publication-title:"+b),n.emit("document-details","questions:open",{sid:a,cname:b,progress:c})}}function DownloadService(a,b,c,d,e,f,g,h){var i=/iPad|iPhone|iPod/.test(navigator.userAgent),j=c.instant;this.getAvailableFormats=function(a,c,d){return e.getConfiguration("download-options").then(function(a){return a?a.packaged:!1}).then(function(e){var g=[];return _.forEach(a,function(a){var h=b+"/download/"+d;e&&(h+="/archive"),h+="?contentType="+k(a);var a={name:a.toLowerCase(),url:h,canDownload:f.canDownloadFormat(c,a)};g.push(a)}),g})},this.startDownload=function(b,c,e,f,k){var l=!!e,m=!!e&&!!e.active;if(l&&!m)return g.openEmailConfirmDialog(self.sessionId),b.preventDefault(),b.stopPropagation(),!1;if(k)return h.openInvalidDocumentDialog(f),b.preventDefault(),b.stopPropagation(),!1;if(d.pop("success",j("document.downloadStarting")),i){var n=b.currentTarget.href;b.preventDefault(),window.open(n,"_blank")}a.$broadcast("download.start")};var k=function(a){var b="application/";return"DOCX"==a?b+"vnd.openxmlformats-officedocument.wordprocessingml.document":b+a.toLowerCase()}}function EmailConfirmationService(a,b,c,d,e,f){var g=b.instant;this.openEmailConfirmDialog=function(b){a.dialog({component:"emailConfirmDialog",resolve:{user:function(){return d.getMe()},sessionId:function(){return b}}}).then(function(){f.$broadcast("confirmation-email:sent"),e.sendActivationEmail(b).then(function(){c.pop("success",g("document.dialog.confirmEmail.successToast"))})})}}function DocumentPropertiesService(a,b,c,d){"ngInject";function e(a){return _.filter(a,["value",null])}function f(a){return _.filter(a,"value")}function g(a){return a.data}function h(c){return c==i.sessionId?d(function(){return i.properties}):a.get(b+"/documents/"+c+"/properties").then(g).then(function(a){return delete i.properties,i.sessionId=c,i.properties=a,a})}this.propertyToString=function(a){var b=a.value;switch(a.type){case"DATE":default:b=new Date(b),b=c("date")(b,"dd.MM.yyyy")}return b},this.getEmptyProperties=function(a){return h(a).then(e)},this.getFilledProperties=function(a){return h(a).then(f)};var i={sessionId:"",properties:void 0};this.setDocumentPropertyValue=function(c,d,e){var f={value:e};return a.put(b+"/documents/"+c+"/properties/"+d,f).then(function(){c==i.sessionId&&(i.properties=_.map(i.properties,function(a){var b=a;return b.id==d&&(b.value=e),b}))})}}function MessageService(a,b,c){"ngInject";this.getMessagesForDocument=function(d){return a.get(b+"/documents/"+d+"/messages").then(function(a){return a.data},function(a){return void c.error("messages could not be loaded",a)})},this.markMessageAsRead=function(a){return this.updateMessage(a,"/markRead")},this.archiveMessage=function(a){return this.updateMessage(a,"/archive")},this.updateMessage=function(d,e){return a.put(b+"/messages/"+d+e).then(function(a){return!0},function(a){return c.error("message could not be marked as read",a),!1})}}function TrackingService(a,b,c,d){"ngInject";function e(a){var c=b("date")(a.dateReceived,"yyyy-MM-dd");return"message-date:"+c+"; message-title:"+a.title}function f(a,b,c){return j("dashboard document details page","click on link in text",e(a)+"; link-text:"+c+"; link-url:"+b)}function g(a){return j("dashboard document details page","view message",e(a))}function h(){return a.configuration.accounts}function i(a){function b(){e||f.resolve(),e=!0}var e=!1,f=c.defer();return d(b,a),{promise:f.promise,resolve:b}}function j(b,d,e){if(h()){var f=i(1e3);return a.trackEvent(b,d,e,{hitCallback:f.resolve}),f.promise}return c.resolve()}return{selectLinkInMessage:f,viewMessage:g}}function DateDialogCtrl(){var a=this;a.$onInit=function(){a.selectedDate=new Date,a.datepickerOptions={showWeeks:!1},a.caption=a.resolve.caption},a.ok=function(){if(a.selectedDate){var b=a.selectedDate.toISOString().split("T")[0];a.close({$value:b})}},a.cancel=function(){a.dismiss()}}function EmailConfirmDialogCtrl(){var a=this;a.$onInit=function(){a.emailConfirmationWidgetModel={user:a.resolve.user,sid:a.resolve.sessionId}},a.resendConfirmationEmail=function(){a.close()},a.cancel=function(){a.dismiss()}}function DocumentPreviewDialogController(a,b,c,d,e,f,g,h){"ngInject";function i(){j.swipingTimeout&&(d.cancel(j.swipingTimeout),j.swipingTimeout=void 0)}var j=this,k=this.sessionId=this.resolve.sessionId;if(this.user=this.resolve.user,this.resolve.documentDataPromise.promise.then(function(a){j.document=a.document,j.downloadFormats=a.downloadFormats,j.downloadDisabled=a.downloadDisabled,j.editAllowed=a.editAllowed},function(){}),k){var l=k.split(/-/)[0];e.trackPage("/doc/"+l+"-xxxx-xxxx-xxxx-xxxxxxxxxxxx/fullPreview")}this.currentPage=0,f.getPreviewPages(k).then(function(a){j.pages=a,j.currentPage=j.currentPage||1,j.setImage(j.currentPage)},function(){j.previewLoadFailed=!0})["finally"](function(){a.previewStatus={loadFinished:!0}}),this.setImage=function(a){if(b.log("setImage pageNo:",a,j.currentImage),a>=1&&j.pages&&j.pages.length&&a<=j.pages.length){if(j.currentImage){var d=j.document?j.document.canonicalName:"";e.trackEvent("dashboard document details page","turn page","publication:"+d)}j.currentPage=a,c.page=a,j.currentImage=j.pages[a-1]}},this.swipingTimeout=void 0,this.swipeRight=function(){b.debug("swipeRight"),j.setImage(j.currentPage-1),j.swipingTimeout=d(i,300)},this.swipeLeft=function(){b.debug("swipeLeft"),j.setImage(j.currentPage+1),j.swipingTimeout=d(i,300)},this.nextPage=function(){b.debug("nextPage",j.swipingTimeout),j.swipingTimeout||j.setImage(j.currentPage+1)},this.previousPage=function(){j.swipingTimeout||j.setImage(j.currentPage-1)},this.editDocument=function(){return j.document.invalid?(h.openInvalidDocumentDialog(j.document.canonicalName),void j.dismiss({$value:"edit"})):void h.editDocument(j.sessionId,j.document.canonicalName,j.document.progressFactor)},this.startDownload=function(a,b){a.stopPropagation();var c=j.document?j.document.canonicalName:"";e.trackEvent("dashboard document details page","download "+b,"publication:"+c+"; format:"+b),g.startDownload(a,b,j.user,c,j.document.invalid),j.dismiss({$value:"download"})},this.cancel=function(a){a.preventDefault(),a.stopPropagation(),j.dismiss({$value:"close"})}}function GuaranteeSealDialogCtrl(a){"ngInject";var b=this;a.trackEvent("preview","view info about guarantee seal","publication:"+b.resolve.documentCanonicalName),b.$onInit=function(){},b.ok=function(){b.close()},b.cancel=function(){b.dismiss()}}function SendAsEmailController(){var a=this;a.message="",a.submit=function(){a.close({$value:{message:a.message}})}}function DocumentPreviewController(a,b,c,d,e,f,g,h,i,j,k){"ngInject";function l(){f.trackEvent("preview","guarantee seal","publication:"+q.documentCanonicalName+"; hover")}var m,n,o,p,q=this;q.baseUrl=k,q.currentPage=parseInt(b.page?b.page:1,10),q.prevPage=q.currentPage,q.showGuaranteeSeal=!1,q.$onInit=function(){this.documentPromise.then(function(a){q.isInvalid=a.invalid,q.formats=a.formats}),this.entitlementsPromise.then(function(a){q.editAllowed=h.isEditAllowed(a),q.entitlements=a}),i.getConfiguration("document-preview-settings").then(function(a){"object"==typeof a&&(n=!!a.previewImageDownloadActivated,p=!!a.enablePageFlipping,q.showGuaranteeSeal=!!a.showGuaranteeSeal)}),i.getConfiguration("download-options").then(function(a){o=a?a.packaged:!1}),g.getPreviewPages(this.sessionId).then(function(a){q.pages=a,q.currentPage=q.currentPage||1,q.setImage(q.currentPage)},function(a){q.onError({error:a})})["finally"](function(){a.previewStatus={loadFinished:!0}})},this.isPreviewImageDownloadActivated=function(){return n},this.isPackagedDownload=function(){return o},this.isDownloadAllowed=function(){return q.entitlements&&q.formats?h.canDownloadFormat(q.entitlements,q.formats[0]):!1},this.getDownloadUrl=function(){if(q.formats){var a=q.formats[0];return q.baseUrl+"/download/"+q.sessionId+(o?"/archive":"")+"?contentType="+this.documentFormatToMimeType(a)}},this.startDownload=function(a){if(q.formats){var b=q.formats[0];return f.trackEvent("preview","download "+b,"publication:"+q.documentCanonicalName),j.startDownload(a,b,q.user,q.documentCanonicalName,q.isInvalid)}},this.documentFormatToMimeType=function(a){var b="application/";return"DOCX"==a?b+"vnd.openxmlformats-officedocument.wordprocessingml.document":b+a.toLowerCase()},this.setImage=function(a){a>=1&&q.pages&&q.pages.length&&a<=q.pages.length&&(b.page=a,q.currentImage=q.pages[a-1],a!=q.prevPage&&f.trackEvent("preview","turn page","publication:"+q.documentCanonicalName+", page:"+a),q.prevPage=q.currentPage,q.currentPage=a)},this.nextPage=function(){this.isPageFlippingEnabled()&&q.setImage(q.currentPage+1)},this.previousPage=function(){this.isPageFlippingEnabled()&&q.setImage(q.currentPage-1)},this.trustRibbonClicked=function(){f.trackEvent("preview","guarantee seal","publication:"+q.documentCanonicalName+"; click"),window.VWO_FEATURES&&window.VWO_FEATURES.guaranteeSealOverlayEnabled&&d.dialog({windowClass:"medium",component:"guaranteeSealDialog",resolve:{documentCanonicalName:function(){return q.documentCanonicalName}}})},this.trustRibbonHovered=function(){q.trustRibbonUnhovered(),m=c(l,500)},this.trustRibbonUnhovered=function(){m&&c.cancel(m)},this.editDocument=function(a){a&&a.stopPropagation(),e.emit("document-preview","questions:open",{sid:q.sessionId})},this.isPageFlippingEnabled=function(){return window.VWO_FEATURES&&window.VWO_FEATURES.previewDocumentBrowsingEnabled===!0||p}}function DialogComponentController(){"ngInject";var a=this;a.$onInit=function(){a.settings=a.resolve.settings},a.onClick=function(b){b&&b.hasOwnProperty("confirm")?a.close({$value:b.confirm}):a.dismiss()}}function dialogFactoryProvider(a,b,c){function d(c){var d;return d=c&&c.controller?b.defaultsDeep({},c,o):b.defaultsDeep({},c,p),a.open(d).result}function e(a,b){return d({windowClass:b||"medium",resolve:{settings:function(){return a}}})}function f(a,b,c,d,f){return e({options:[{label:n(c),primary:!0,confirm:!0},{label:n(d)}],warning:!!f,message:n(b),title:n(a)})}function g(){return f("document.dialog.deleteDocument.title","document.dialog.deleteDocument.bodyMessage","document.dialog.deleteDocument.buttonLabelConfirm","document.dialog.deleteDocument.buttonLabelCancel",!0)}function h(){return f("document.dialog.documentClaim.title","document.dialog.documentClaim.bodyMessage","document.dialog.documentClaim.buttonLabelConfirm","document.dialog.documentClaim.buttonLabelCancel")}function i(){return f("document.dialog.downloadNotEntitled.noSubscription.title","document.dialog.downloadNotEntitled.noSubscription.bodyMessage","document.dialog.downloadNotEntitled.noSubscription.buttonLabelConfirm","document.dialog.downloadNotEntitled.noSubscription.buttonLabelCancel")}function j(){return f("document.dialog.downloadNotEntitled.wrongRateplan.title","document.dialog.downloadNotEntitled.wrongRateplan.bodyMessage","document.dialog.downloadNotEntitled.wrongRateplan.buttonLabelConfirm","document.dialog.downloadNotEntitled.wrongRateplan.buttonLabelCancel")}function k(){return f("document.dialog.downloadNotEntitled.downloadDeadline.title","document.dialog.downloadNotEntitled.downloadDeadline.bodyMessage","document.dialog.downloadNotEntitled.downloadDeadline.buttonLabelConfirm","document.dialog.downloadNotEntitled.downloadDeadline.buttonLabelCancel")}function l(a){var b,c;return a&&(b=a.plan,c=a.status),b?(angular.isString(c)&&(c=c.toLowerCase()),"subscription"===c||"free-trial"===c?j():"single-document"===c?k():void 0):i()}function m(){return f("document.alert.invalidDocument.title","document.alert.invalidDocument.messageFinished","document.dialog.invalidDocument.buttonLabelCreateNew","document.dialog.invalidDocument.buttonLabelCancel")}var n=c.instant,o={animation:!1,windowClass:"medium",resolve:{settings:function(){return{options:[{label:"OK",primary:!0,confirm:!0},{label:"Cancel"}],warning:!1,message:"Default dialog message",title:"Default dialog title"}}}},p=b.assign({},o,{component:"dialogComponent"});return{dialog:d,confirm:e,confirmDeleteDocument:g,confirmClaimSession:h,openDownloadNotEntitledDialog:l,openInvalidDocumentDialog:m}}function TitleInputComponentController(a,b,c,d,e){"ngInject";var f=this,g=27;this.isEditing=!1,this.startEdit=function(){f.customTitle=f.document.customTitle?f.document.customTitle:f.document.title,f.isEditing=!0,b(function(){c.$broadcast("focus:customTitle")})},this.cancelEdit=function(){f.isEditing=!1},this.updateTitle=function(){f.isEditing=!1,f.document.customTitle=f.customTitle,e.trackEvent("dashboard document details page","document name change","publication-title:"+f.document.canonicalName),d.updateCustomTitle(f.sessionId,f.document.customTitle)},this.onKeypress=function(a){a.keyCode===g&&f.cancelEdit()}}function PreviewCtrl(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){"ngInject";function u(){return p.getConfiguration("product-selection-feature").then(function(a){F.showProductSelection=D.get(a,"showProductSelection",!1)})}function v(){return p.getConfiguration("document-preview-settings").then(function(a){F.forwardToDetailsPageEnabled=D.get(a,"forwardToDetailsPageEnabled",!0),G=D.get(a,"showTitleInput",!1)})}function w(){b.log("redirect on canDownload"),e.path("/"+F.sessionId+"/details").replace()}function x(a){return!!a&&a.progressFactor<1}function y(a,b){return D.find(a.formats,function(a){return k.canDownloadFormat(b,a)})}function z(){return!D.isUndefined(F.entitlements)}function A(){return t().then(function(a){return a.send===!0?m.forwardDocument(F.sessionId,{customMessage:D.get(a,"data.message")}).then(function(){q.pop("success",E("document.dialog.shareDocument.successToast"))})["catch"](function(){q.pop("error",E("document.dialog.shareDocument.errorToast"))}):void 0})}function B(a,b){return g.getTargetUrlForEvent("document-preview",a,b).then(function(a){return a?(s.location.href=a,!0):!1})}var C={READY:"READY",FAIL:"FAIL",BUSY:"BUSY"};l.setSource("document-preview");var D=a,E=d.instant,F=this,G=!1;D.assign(F,{sessionId:i.sessionId,hasError:!1,viewMode:C.BUSY}),j.decorateWithPromises(F,F.sessionId),r.all([u(),v()]).then(function(){return F.userPromise}).then(function(a){return F.showTitleInput=G&&!!a,F.showTitleInput&&(F.enableActionMenuClone(),F.enableActionMenuDelete()),F.documentPromise}).then(function(a){return F.forwardToDetailsPageEnabled&&x(a)&&w(),D.assign(F,{document:a,isInvalid:a.invalid,marketingWidgetModel:{canonicalName:a.canonicalName,sessionId:F.sessionId,sid:F.sessionId},optionsWidgetModel:{sessionId:F.sessionId}}),F.entitlementsPromise}).then(function(a){return D.assign(F,{entitlements:a,isProposePurchase:k.isProposePurchase(a)}),y(F.document,a)?void(F.forwardToDetailsPageEnabled&&w()):B("entitlements:missing",{sid:F.sessionId})}).then(function(){F.viewMode=C.READY}).then(function(){if(F.sessionId){var a=F.sessionId.split(/-/)[0];n.trackPage("/doc/"+a+"-xxxx-xxxx-xxxx-xxxxxxxxxxxx/preview")}n.trackEvent("preview","preview","publication:"+F.document.canonicalName)})["catch"](function(a){b.error("got an error: ",a),F.hasError=!0,F.viewMode=C.FAIL}).then(function(){D.isUndefined(o)||(o.start(),o.trackPage(),o.addTag("preview")),D.isUndefined(f)||f.trackPage()}).then(function(){var a="1"===i.share,b=F.document;return F.viewMode!=C.FAIL&&y(b,F.entitlements)&&b.forwardDocumentEnabled===!0&&a?A():void 0}),c.$on("action-menu:selected",function(a,b){switch(b.id){case"edit":return B("questions:open",{sid:F.sessionId});case"clone":F.cloneDocument();break;case"delete":F.deleteDocument()}}),D.extend(F,{setError:function(a){F.hasError=!0,b.error("caught error: ",a)},gotoDownloadOptions:function(){h("download-options")},showMarketingWidget:function(){return F.showProductSelection===!1&&z()&&F.isProposePurchase===!0&&!F.hasError&&!F.isInvalid},cloneDocument:function(){if(F.document){F.isCloneDocumentDisabled=!0;var a=F.document.customTitle?F.document.customTitle:F.document.title;a+=E("document.details.clonedDocumentTitlePostfix"),m.clone(F.sessionId,a).then(function(a){n.trackEvent("preview","duplicate document","publication:"+a.canonicalName),e.path("/"+a.id+"/details"),q.pop("success",E("document.details.cloneSuccess"))},function(){q.pop("error",E("document.details.cloneError")),F.isCloneDocumentDisabled=!1})}},deleteDocument:function(){n.trackEvent("preview","delete document icon","publication:"+F.document.canonicalName),dialogFactory.confirmDeleteDocument().then(function(a){a&&m["delete"](F.sessionId).then(function(){n.trackEvent("preview","delete document confirm","publication:"+F.document.canonicalName,{hitCallback:functionWithTimeout(function(){g.emit("document-preview","document:deleted",{user:F.user})})})},function(){q.pop("error",E("document.details.deleteError"))})})},onShareDocument:A})}function DownloadAndPurchaseCtrl(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"ngInject";var s=this;this.baseUrl=i;var t=a,u=h.instant,v=c("money"),w=c("stringFormat");/iPad|iPhone|iPod/.test(navigator.userAgent);this.document={};var x=!1,y=27;s.tenantContactData,s.$onInit=function(){r.getContactData().then(function(a){s.tenantContactData=a},{})},this.marketingWidgetModel={sessionId:this.sessionId,sid:this.sessionId};var z=n.getMe();z.then(function(a){s.user=a}),this.documentPromise.then(function(a){s.document=a,s.isInvalid=a.invalid}),this.entitlementsPromise.then(function(a){s.entitlements=a,s.areEntitlementsLoaded=!0,s.isProposePurchase=m.isProposePurchase(a),s.isProposePurchase?k.getConfiguration("product-selection-feature").then(function(a){return a&&a.showProductSelection?!0:(s.showProductSelection=!1,!1)}).then(function(a){if(a){var b=s.document.canonicalName,c=l.getProducts(b),d=k.getConfiguration("product-marketing-snippets");f.all([c,d]).then(function(a){var b=a[0],c=s.productBenefitsElements=a[1],d=l.findBestProduct(b,!0);if(d&&(s.bestOneTimeProduct=d,c.payPerDocument)){var f=c.payPerDocument;s.oneTimeProductBenefitsSnippet=e.trustAsHtml(f.content)}var g=s.subscriptionProducts=l.findSubscriptionProducts(b);g&&g.length?s.updateBestSubscriptionProduct(g[0]):s.onError({error:"Could not determine best plan, subscription product list is empty."}),s.showProductSelection=!0},function(a){s.onError({error:"Could not obtain products or product marketing snippets."})})}},function(){s.onError({error:"Could not obtain products or product marketing snippets."})}):k.getConfiguration("download-options").then(function(a){s.isPackagedDownload=a?a.packaged:!1})},function(a){s.onError({error:"Could not load entitlements for this document."}),g.error("Could not load entitlements for this document.",a)}),this.updateBestSubscriptionProduct=function(a){s.bestSubscriptionProduct=a,s.bestSubscriptionProductFreeTrialDays=a.freeTrialDays+"";var b=t.find(s.productBenefitsElements.plans,{key:a.sku});b?s.subscriptionProductBenefitsSnippet=e.trustAsHtml(b.content):s.subscriptionProductBenefitsSnippet=void 0},this.updateBestSubscriptionProductAndTrackChangeEvent=function(a){this.updateBestSubscriptionProduct(a),q.trackEvent("preview","click on dropdown element","publication:"+s.document.canonicalName+"; rateplan:"+a.name)},this.openOptions=function(){x=!x,x&&q.trackEvent("preview","expand dropdown","publication:"+s.document.canonicalName)},this.closeOptions=function(){x&&(x=!1)},this.onKeypress=function(a){a.keyCode===y&&s.closeOptions()},this.getNiceSubscriptionProductName=function(a){var b=v(a.charge.price,a.charge.currency),c=u("document.purchase.subscription.productSelectLabel"),d=w(c,b,a.name);return d},this.startDownload=function(a,b){var c=s.document?s.document.canonicalName:"";return q.trackEvent("preview","download "+b,"publication:"+c),o.startDownload(a,b,s.user,c,!1)},this.documentFormatToMimeType=function(a){var b="application/";return"DOCX"==a?b+"vnd.openxmlformats-officedocument.wordprocessingml.document":b+a.toLowerCase()},this.canDownloadFormat=function(a){var b=new RegExp("download\\/(\\*|"+a+")","i");return t.some(s.entitlements,function(a){return"GRANTED"===a.status.toUpperCase()&&a.actionId.match(b)})},this.createDocument=function(){if(s.document){var a=s.document.canonicalName;p.createDocument(a)}},this.zenDeskEnabled=function(){return!!b.zE},this.openSupportWidget=function(){s.zenDeskEnabled()&&(b.zE.activate({hideOnClose:!0}),z.then(function(a){a&&b.zE.identify({name:a.firstName+" "+a.lastName,email:a.emailAddress})}))}}function PlanBoxCtrl(a,b,c){"ngInject";function d(b){function c(){d||(d=!0,a.cancel(e),b())}var d=!1,e=a(c,1e3);return c}var e=this;this.gotoCheckout=function(a){var f=e.isPrimary,g=f?"click subscription":"click single document",h=e.document?e.document.canonicalName:"",i="publication:"+h;window.VWO_FEATURES&&window.VWO_FEATURES.trackingLabels&&_.forEach(window.VWO_FEATURES.trackingLabels,function(a){i+=";"+a}),b.trackEvent("preview",g,i,{hitCallback:d(function(){c.emit("document-preview","buynow:click",{ratePlanId:a,resourceName:h,sessionId:e.sessionId})})})}}function AuthorInformationCtrl(){"ngInject"}function DetailsCtrl(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){"ngInject";function x(){return M&&M.isMessagesActivated()}function y(){return M&&M.isProjectionsActivated()}function z(){return M&&M.isPropertiesActivated()}function A(){return M&&M.isRelationshipsActivated()}function B(a){return t.getMessagesForDocument(a).then(function(a){a&&a.length>0?I.messages=a:I.messages=[]})["catch"](function(){I.messages=[]})}function C(a,b){return J.find(a.formats,function(a){return u.canDownloadFormat(b,a)})}function D(a,b){var c=I.document&&I.document.canonicalName?I.document.canonicalName:"";o.trackEvent(L,a,"publication:"+c+(b?"; "+b:""))}function E(a,b){D(a,"message:"+b.title)}function F(a,b){return i.getTargetUrlForEvent("document-details",a,b).then(function(a){return a?(d.location.href=a,!0):!1})}function G(a){c.error("error is:",a)}function H(a){function b(){c||(c=!0,p.cancel(d),a())}var c=!1,d=p(b,1e3);return b}var I=this,J=v,K=a.instant,L="dashboard document details page";J.assign(I,{hasError:!1,downloadFormats:[],zenDeskEnabled:d.zE,sessionId:e.sessionId,documentFolderModel:null,messages:void 0,document:void 0}),j.decorateWithPromises(I,I.sessionId),s.isRunning()&&(c.log("stopping mouseflow"),s.stop()),l.setSource("document-details");var M;w.loadFeatureConfiguration().then(function(a){a&&(M=a,M.isMessagesActivated()?B(I.sessionId):I.messages=[])}),this.documentPromise.then(function(a){return I.document=a,I.userPromise}).then(function(a){return I.user=a,I.entitlementsPromise}).then(function(a){return I.entitlements=a,C(I.document,a)?void 0:F("entitlements:missing",{sid:self.sessionId})}).then(function(){return I.user&&A()?q.getDocumentFolderModel(I.sessionId,J.get(I,"document.publicationId")).then(function(a){I.documentFolderModel=a.data}):void 0})["catch"](G)["finally"](function(){D("view details page");var a=I.user;a&&!a.active&&e.action&&"check-active"===e.action&&r.openEmailConfirmDialog(I.sessionId),h&&h.trackPage()}),this.enableActionMenuClone(),this.enableActionMenuDelete(),f.$on("action-menu:selected",function(a,b){switch(b.id){case"edit":I.editDocument();break;case"clone":I.cloneDocument();break;case"delete":I.deleteDocument()}}),f.$on("action-menu:open",function(){D("expand mobile menu")}),f.$on("confirmation-email:sent",function(){D("click on re-send activation email")}),J.extend(I,{setDownloadFormats:function(a){I.downloadFormats=a},setError:function(a){I.hasError=!0,c.error("error is:",a)},gotoRelationshipFolder:function(a){i.emit("document-details","relationship:open",{relationshipId:a})},folderActionBoxCall:function(){f.$broadcast("folder.select.open")},documentFolderViewClick:function(){I.documentFolderModel.documentRelationship?I.gotoRelationshipFolder(I.documentFolderModel.documentRelationship.id):D("click add to relationship")},documentFolderSelected:function(a){c.debug("Selected folder is: ",a);var b=a.relationshipDefinitionId?a:{relationshipDefinitionId:a.id,customTitle:a.title};D("add document to relationship","relationship:"+b.customTitle),q.saveDocumentFolder(I.sessionId,b).then(function(a){f.$broadcast("folder.select.submit"),I.documentFolderModel=a.data,I.gotoRelationshipFolder(I.documentFolderModel.documentRelationship.id)},G)},createDocument:function(){if(I.document){var a=I.document.canonicalName;j.createDocument(a)}},editDocument:function(){this.documentPromise.then(function(){I.sessionId&&I.document&&j.editDocument(I.sessionId,I.document.canonicalName,I.document.progressFactor)})},openSupportWidget:function(){I.zenDeskEnabled()&&(d.zE.activate({hideOnClose:!0}),I.userPromise.then(function(a){a&&d.zE.identify({name:a.firstName+" "+a.lastName,email:a.emailAddress})}))},zenDeskEnabled:function(){return!!d.zE},downloadAction:function(a,b){if(b.canDownload){var c=I.document?I.document.canonicalName:"";k.startDownload(a,b.name,I.user,c,I.document.invalid)}else this.downloadNotEntitled(a,b.name)},startDownload:function(a,b){I.isDownloadMenuOpen=!1;var c=I.document?I.document.canonicalName:"";return D("download "+b,"format:"+b),k.startDownload(a,b,I.user,c,I.document.invalid)},downloadNotEntitled:function(a,b){a.preventDefault(),a.stopPropagation(),j.openDownloadNotEntitledDialog(I.user,I.sessionId,I.document.canonicalName)},cloneDocument:function(){if(!I.document)return void c.error("Document is undefined.");I.isCloneDocumentDisabled=!0;var a=I.document.customTitle?I.document.customTitle:I.document.title;a+=K("document.details.clonedDocumentTitlePostfix"),m.clone(I.sessionId,a).then(function(a){D("duplicate document"),b.path("/"+a.id+"/details"),
g.pop("success",K("document.details.cloneSuccess"))},function(){g.pop("error",K("document.details.cloneError")),I.isCloneDocumentDisabled=!1})},deleteDocument:function(){D("delete document icon"),n.confirmDeleteDocument().then(function(a){a&&m["delete"](I.sessionId).then(function(){o.trackEvent(L,"delete document confirm","publication:"+I.document.canonicalName,{hitCallback:H(function(){i.emit("document-details","document:deleted",{user:I.user})})})},function(){g.pop("error",K("document.details.deleteError"))})})},archiveMessage:function(a){a&&(t.archiveMessage(a.id),E("click to archive message",a),I.messages=I.messages.filter(function(b){return b.id!==a.id}))},markMessageAsRead:function(a){a&&a.read===!1&&(a.read=!0,t.markMessageAsRead(a.id))},openMessageDetailsFromList:function(a){this.openMessageDetails(a),E("click on message",a)},openMessageDetails:function(a){n.dialog({windowClass:"large",component:"messageDetailsDialog",resolve:{message:a,archive:{action:I.archiveMessage}}}).then(function(){E("click to close overlay",a),I.markMessageAsRead(a)})},onPropertyChange:function(){f.$broadcast("property:change")},isRelationshipsActivated:function(){return A()},isMessagesActivated:function(){return x()},isProjectionsActivated:function(){return y()},isPropertiesActivated:function(){return z()},isCdpAcceptanceMissing:function(){if(!I.user||!I.document)return!1;var a=!!I.user.businessUser,b="undefined"==typeof I.document.businessDocument,c=b?a:!!I.document.businessDocument,d=!!I.user.cdpAcceptDate,e=a&&c;return e&&!d},getCdpAcceptance:function(){F("cdp:missing",{sid:I.sessionId})}})}function DocumentFolderViewController(a,b,c,d){"ngInject";function e(a,b){Array.isArray(a)&&a.forEach(function(a){b.push(a)})}function f(a){if(a){if(g.viewModel.availableFolders=[],g.viewModel.newFolders=[],a.documentRelationship)return void(g.boundFolder=a.documentRelationship);e(a.publicationDefinitions,g.viewModel.newFolders),e(a.availableDocumentRelationships,g.viewModel.availableFolders)}}var g=this;g.viewModel={},g.selectedFolderId,this.$onChanges=function(b){a.debug("DocumentFolderView changes is: ",b),b.documentFolderModel&&b.documentFolderModel.currentValue&&f(b.documentFolderModel.currentValue)},this.saveSelectedFolder=function(){a.debug("Selected DocumentFolderId is: ",g.selectedFolderId);var b=g.viewModel.newFolders.concat(g.viewModel.availableFolders),c=d.find(b,function(a){return a.id.match(g.selectedFolderId)});a.debug("Selected DocumentFolder is: ",c),g.onDocumentFolderSelected({folder:c})},this.folderClick=function(a){a.preventDefault(),g.boundFolder||g.openDialog()},c.$on("folder.select.open",function(){g.openDialog()}),this.openDialog=function(){var a=b.dialog({windowClass:"medium",component:"slDocumentFolderSelectionModal",resolve:{newFolders:function(){return g.viewModel.newFolders},availableFolders:function(){return g.viewModel.availableFolders}}});a.then(function(a){a&&(g.selectedFolderId=a,g.saveSelectedFolder())})["finally"](function(){a=void 0})},f(this.documentFolderModel)}function DocumentFolderSelectionModalController(a){"ngInject";var b=this;b.selectedFolderId=null,b.$onInit=function(){b.newFolders=b.resolve.newFolders,b.availableFolders=b.resolve.availableFolders},this.cancel=function(){b.dismiss()},this.confirm=function(){a.debug("confirm",b.selectedFolderId),b.close({$value:b.selectedFolderId})}}function DetailsPreviewController(a,b,c,d,e,f,g,h,i){"ngInject";var j=this,k=a.defer(),l={document:void 0,downloadDisabled:void 0,downloadFormats:void 0,editAllowed:void 0};this.isPreviewLoading=!0,j.$onChanges=function(a){if(j.document){var b=l.document=j.document;j.isDocumentInvalid=b.invalid,1===b.progressFactor?e.getFirstPreviewPage(j.sessionId).then(function(a){j.previewImage=a}):j.previewImage=!1}j.document&&j.entitlements&&(j.editAllowed=l.editAllowed=g.isEditAllowed(j.entitlements),j.editDisabled=j.invalidDocument,f.getAvailableFormats(j.document.formats,j.entitlements,j.sessionId).then(function(a){j.onDownloadFormatReady({downloadFormats:a}),j.downloadFormats=l.downloadFormats=a,j.downloadDisabled=l.downloadDisabled=j.invalidDocument||j.cdpAcceptanceMissing,k.resolve(l)})["catch"](function(){k.reject(l)}))},j.editDocument=function(a){if(a.stopPropagation(),j.invalidDocument)return void h.openInvalidDocumentDialog(j.document.canonicalName);var b=j.document?j.document.progressFactor:0;h.editDocument(j.sessionId,j.document.canonicalName,b)},j.startDownload=function(a,b){a.stopPropagation();var c=j.document?j.document.canonicalName:"";return i.trackEvent("dashboard document details page","download "+b,"publication:"+c+"; format:"+b),f.startDownload(a,b,j.user,c,j.document.invalid)},j.downloadNotEntitled=function(a,b){a.preventDefault(),a.stopPropagation(),h.openDownloadNotEntitledDialog(j.user,j.sessionId,j.document.canonicalName)},j.previewLoaded=function(){j.isPreviewLoading=!1},j.previewLoadError=function(){j.onError({error:"preview could not be loaded!"})},j.zoomIn=function(a){a.stopPropagation(),i.trackEvent("dashboard document details page","click to preview","publication:"+j.document.canonicalName);var d=b.dialog({windowClass:"preview",component:"slDocumentPreviewDialog",resolve:{documentDataPromise:function(){return{promise:k.promise}},sessionId:function(){return j.sessionId},user:function(){return j.user}}});d.then(function(){},function(a){if(c.log("modal dismissed",a),"close"===a||"escape key press"===a){var b=j.document?j.document.canonicalName:"";i.trackEvent("dashboard document details page","close preview","publication:"+b)}})["finally"](function(){d=void 0})}}function DetailsDataController(a,b,c,d,e,f){"ngInject";function g(a,b){return _.filter(a,function(a){return _.includes(b,a.type)})}function h(a){return{label:a.label,rank:a.rank,value:f.propertyToString(a)}}function i(){if(j.projectionsActivated?(j.projectionPromise=d.get(j.sessionId),j.projectionPromise.then(function(a){j.projections=a?a.data:[],j.projectionClasses={termsAndConditions:g(j.projections,["LEGAL_RELATIONSHIP"]),subjects:g(j.projections,["NATURAL_PERSON","LEGAL_PERSON"]),objects:g(j.projections,["LEGAL_OBJECT"])},c.log("projectionClasses: ",j.projectionClasses)},function(a){j.projections=[]})):j.projections=[],b.all([j.documentPromise,j.entitlementsPromise]).then(function(a){var b=a[0],c=a[1];j.editAllowed=!b.invalid&&e.isEditAllowed(c)}),j.propertiesActivated){var a=f.getFilledProperties(j.sessionId);a.then(function(a){if(a&&a.length>0){var b={view:"",type:"PROPERTY",attributes:_.map(a,h)};j.properties=[b],j.showInformationSection||(j.showInformationSection=!0)}else j.properties=[]})}else j.properties=[]}var j=this;this.showInformationSection=!0,this.editAllowed=!1,i(),this.editDocument=function(){this.editAllowed&&this.onEdit&&this.onEdit()},this.isProjectionsActivated=function(){return j.projectionsActivated},a.$on("property:change",i)}function ProjectionEntityController(){"ngInject";this.useViewTitle=void 0!==this.useViewTitle?this.useViewTitle:!1}function ActionBoxController(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"ngInject";function o(){function a(){if(!(c>=b.length)){var e=b[c++];e&&"function"==typeof e.entryGuard&&e.entryGuard().then(function(b){d===ca&&(b===!0?p(e):a())},function(){d===ca&&a()})}}if(aa&&aa.nextStates&&_.isArray(aa.nextStates)){var b=aa.nextStates,c=0,d=++ca;a()}}function p(a){"function"==typeof aa.exit&&aa.exit();var b="function"==typeof a.enter?a.enter():void 0;return b?(q(b),void(aa=a)):void r()}function q(a){return N.loaded=!0,N.actionBox?(N.visible=!1,void h(function(){N.actionBox=a,N.visible=!0},P)):(N.actionBox=a,void(N.visible=!0))}function r(){N.visible=!1,h(function(){N.loaded=!1,N.actionBox=void 0},P)}function s(){a.$watch(function(){return N.hasError},function(a){a&&v()})}function t(){var b=m.defer(),c=a.$watch(function(){return N.messages},function(a){"undefined"!=typeof a&&(b.resolve(a),c())});$=b.promise}function u(){N.documentPromise.then(function(a){ba=a.canonicalName},function(a){a&&a.status&&a.status>=500&&v()})}function v(){R.notifyOfError(),o()}function w(a,b){i.trackEvent(O,a,"publication-title:"+ba+(b?"; "+b:""))}function x(a,b){w("action box view","action-box:"+a+(b?"; "+b:""))}function y(a,b){w("action box button click","action-box:"+a+(b?"; "+b:""))}function z(a,b,c){this.entryGuard="function"==typeof a?a:function(){return m.resolve(!0)},this.enter="function"==typeof b?b:function(){return void 0},this.exit="function"==typeof c?c:function(){},this.nextStates=[],this.linkTo=function(){return this.nextStates=_.concat(this.nextStates,arguments),this}}function A(){function a(){return m.resolve(!0)}function b(){return void 0}z.call(this,a,b)}function B(){function a(){var a=m.defer();return a.resolve(d),a.promise}function b(){y("error"),e.zE&&(e.zE.activate({hideOnClose:!0}),f.getMe().then(function(a){e.zE.identify({name:a.firstName+" "+a.lastName,email:a.emailAddress})}))}function c(){return x("error"),new J("error",void 0,"document.error.previewGenerationErrorMessage",new M("document.error.buttonPrimary",b))}var d=!1;this.notifyOfError=function(){d=!0},z.call(this,a,c)}function C(){function a(){return N.documentPromise.then(function(a){e=a;var b=e&&e.invalid===!0;return b},function(){return!1})}function b(){e&&(y("invalid document"),d.createDocument(e.canonicalName))}function c(){return e?(x("invalid document"),new J("invalidated","document.alert.invalidDocument.title",1===e.progressFactor?"document.alert.invalidDocument.messageFinished":"document.alert.invalidDocument.message",new M("document.alert.invalidDocument.buttonPrimary",b))):void 0}var e=void 0;z.call(this,a,c)}function D(){function a(){return N.documentPromise.then(function(a){c=a;var b=c&&1!==c.progressFactor;return b},function(){return!1})}function b(){if(!c)return void 0;x("resume editing");var a=l.instant("document.alert.unfinishedDocument.message");return a=k("stringFormat")(a,k("number")(100*c.progressFactor,0)),new J("unfinished","document.alert.unfinishedDocument.title",a,new M("document.alert.unfinishedDocument.buttonPrimary",e))}var c=void 0,e=function(){c&&(y("resume editing"),d.editDocument(N.sessionId,c.canonicalName,c.progressFactor,!0))};z.call(this,a,b)}function E(){function a(){return m.resolve(N.cdpAcceptanceMissing)}function b(){return x("cdp-missing"),new J("cdp",void 0,"document.cdp.message",new M("document.cdp.button",c))}var c=function(){"function"==typeof N.cdpAcceptanceMissingAction&&N.cdpAcceptanceMissingAction()};z.call(this,a,b)}function F(){function b(){var a=m.defer();return N.documentPromise.then(function(b){g=b;var c=g&&1===g.progressFactor&&!g.downloaded&&!N.cdpAcceptanceMissing;return c?void N.entitlementsPromise.then(function(b){j.getAvailableFormats(g.formats,b,N.sessionId).then(function(b){h=_.map(b,function(a){return{format:a,label:a.name,url:a.canDownload?a.url:"#",disabled:!a.canDownload}}),a.resolve(!0)},function(){a.resolve(!1)})},function(){a.resolve(!1)}):void a.resolve(!1)},function(){a.resolve(!1)}),a.promise}function c(){i=a.$on("download.start",function(){o()})}function d(){return g&&h?(x("download"),c(),new J("download","document.alert.finishedDocument.title","document.alert.finishedDocument.message",new L("document.alert.finishedDocument.buttonPrimary",h,k))):void 0}function e(){"function"==typeof i&&i(),i=void 0}function f(){e()}var g,h,i,k=function(a,b){y("download","format:"+b.label),"function"==typeof N.downloadAction&&N.downloadAction({event:a,format:b.format})};z.call(this,b,d,f)}function G(){function b(){function a(a){return a&&!a.archived}function b(a){return a?a.dateReceived:void 0}function c(a){if(!a||!a.type)return void 0;var b=_.indexOf(d,a.type);return b>=0?b:void 0}if(!N.messages)return void 0;var d=["ALERT","NOTIFICATION"],e=_.filter(N.messages,a),f=_.reverse(_.sortBy(e,b)),g=_.sortBy(f,c);return g.length>0?g[0]:void 0}function c(){return $.then(function(){return i=b(),!!i})}function d(){i&&(y("message","message:"+i.title),"function"==typeof N.messageDetailsAction&&N.messageDetailsAction({message:i}))}function e(){j=a.$watch(function(){var a=b();return a?a.id:void 0},function(a){i&&i.id!==a&&o()})}function f(){return i?(x("message","message:"+i.title),e(),new J("messages",i.title,i.summary,new M("document.alert.message.buttonPrimary",d),"ALERT"===i.type?"icon-bell":"icon-envelope-closed")):void 0}function g(){"function"==typeof j&&j(),j=void 0}function h(){g()}var i,j;z.call(this,c,f,h)}function H(){function a(){return N.propertiesActivated?b.getEmptyProperties(N.sessionId).then(function(a){return a&&a.length>0?(h=_.sortBy(a,"rank")[0],!0):!1},function(){return!1}):m.resolve(!1)}function c(){y("property edit","property:"+h.label);var a=void 0;switch(h.type){case"DATE":default:a="dateDialog"}g.dialog({windowClass:"small",component:a,resolve:{caption:function(){return h.headline}}}).then(e,d)}function d(){w("cancel date selection","action-box:property edit; property:"+h.label)}function e(a){w("confirm date selection","action-box:property edit; property:"+h.label),b.setDocumentPropertyValue(N.sessionId,h.id,a).then(function(){"function"==typeof N.onPropertyChange&&N.onPropertyChange(),o()},o)}function f(){return h?(x("property edit","property:"+h.label),new J("properties",h.headline,h.description,new M("document.alert.property.buttonPrimary",c))):void 0}var h;z.call(this,a,f)}function I(){function b(){if(!N.relationshipsActivated)return m.resolve(!1);var a=m.defer();return N.documentPromise.then(function(b){N.userPromise.then(function(d){d?c.getDocumentFolderModel(N.sessionId,b.publicationId).then(function(b){var c=b.data,d=c&&!c.documentRelationship;a.resolve(d)},function(){a.resolve(!1)}):a.resolve(!1)})},function(){a.resolve(!1)}),a.promise}function d(){y("add to legal relationship"),"function"==typeof N.folderAction&&N.folderAction()}function e(){i=a.$on("folder.select.submit",function(){o()})}function f(){return x("add to legal relationship"),e(),new J("folder","document.alert.addToFolder.title","document.alert.addToFolder.message",new M("document.alert.addToFolder.buttonPrimary",d))}function g(){"function"==typeof i&&i(),i=void 0}function h(){g()}var i;z.call(this,b,f,h)}function J(a,b,c,d,e){this.type=a,this.title=b?b:void 0,this.message=c?c:"",this.action=d?d:new K,this.icon=e?e:"icon-exclamation-mark"}function K(a,b,c,d){this.label=a?a:"OK",this.callback=b?b:function(){},this.type=c?c:"button",this.visible=d?d:!0}function L(a,b,c){this.options=b,K.call(this,a,c,"dropdown")}function M(a,b){K.call(this,a,b,"button")}var N=this;N.actionBox=void 0,N.loaded=!1,N.visible=!1;var O="dashboard document details page",P=600,Q=new A,R=new B,S=new C,T=new D,U=new E,V=new F,W=new G,X=new H,Y=new I,Z=new A;Q.linkTo(R,S,T,U,V,W,X,Y),S.linkTo(R),T.linkTo(R),U.linkTo(R,V,Y,Z),V.linkTo(R,W,X,Y),W.linkTo(R,W,X,Y,Z),X.linkTo(R,X,Y,Z),Y.linkTo(R,Z);var $,aa=Q,ba="",ca=0;N.$onInit=function(){o(),s(),t(),u(),n.getContactData().then(function(a){N.tenantContactData=a},{})}}function MessageDetailsDialogController(a,b){"ngInject";var c=this;c.$onInit=function(){c.message=c.resolve.message,c.statusClass=c.message.type.toLowerCase(),c.statusClass+=c.message.read===!0?" read":"",a.viewMessage(c.message)},c.archiveAction=function(){c.resolve.archive.action(c.message),c.dismiss()},c.closeOverlay=function(){c.close()},c.onMessageLinkClick=function(d,e){a.selectLinkInMessage(c.message,d,e).then(function(){b.location.href=d})}}function MessageItemController(){var a=this;a.isAlert=function(){return"alert"===a.message.type.toLowerCase()},a.isRead=function(){return a.message.read===!0}}function MessageListController(){var a=this;a.$onInit=function(){a.showMessagesSection=!1}}angular.module("document-client",["ngCookies","ngResource","ngRoute","ngSanitize","ngAnimate","ngLodash","mm.foundation","imageSpinner","sl.widget","angular-google-analytics","toaster","sl.customer-journey-executor","slNavigation","slNavigation-mouseflow","ngTouch","ui.bootstrap","kf.focusOn","tracking.vwo","sl.shared-client-services","document-client-i18n"]).config(["$httpProvider","$logProvider","debug",function(a,b,c){b.debugEnabled(c)}]).run(["$rootScope","$log","userService","headerModelService",function(a,b,c,d){d.init(),c.getMe().then(function(b){a.currentUser=b},function(){b.info("Could not obtain current user.")})}]).config(["AnalyticsProvider",function(a){var b=window.tenantConfiguration&&window.tenantConfiguration.hasOwnProperty("google-analytics")&&window.tenantConfiguration["google-analytics"].hasOwnProperty("ga")?window.tenantConfiguration["google-analytics"].ga:null,c=b?b.id:null;a.setAccount(c),a.ignoreFirstPageLoad(!0),a.trackPrefix("doc/#"),a.trackPages(!1)}]).config(["vwoProvider",function(a){var b=window.tenantConfiguration&&window.tenantConfiguration.hasOwnProperty("vwo")&&window.tenantConfiguration.vwo.hasOwnProperty("vwo")?window.tenantConfiguration.vwo.vwo:void 0,c=b?b.accountId:void 0;"undefined"!=typeof c&&a.init(c)}]).config(["mouseflowProvider",function(a){var b=window.tenantConfiguration&&window.tenantConfiguration.hasOwnProperty("mouseflow")&&window.tenantConfiguration.mouseflow.hasOwnProperty("mouseflow")?window.tenantConfiguration.mouseflow.mouseflow:void 0;b&&"undefined"!=typeof b&&a.init(b)}]),angular.module("document-client").constant("defaultTarget","document-adapter").constant("baseUrl","/adapter/document-adapter").constant("debug",!1);var slLanguageManager=window.slLanguageManager;angular.module("document-client-i18n",["pascalprecht.translate","tmh.dynamicLocale","document-client-i18n-translations"]).config(["tmhDynamicLocaleProvider",function(a){a.localeLocationPattern("bower_components/angular-i18n/angular-locale_{{locale}}.js")}]).run(["tmhDynamicLocale","$translate",function(a,b){a.set(b.use())}]).config(["$translateProvider","translations",function(a,b){slLanguageManager.init();var c=slLanguageManager.getAppLanguage()||"de";a.translations("en",b.en).translations("de",b.de).translations("cs",b.cs).useSanitizeValueStrategy("escapeParameters").preferredLanguage(c)}]),angular.module("document-client-i18n-translations",[]).constant("translations",{de:{common:{AT:"Österreich",BE:"Belgien",BG:"Bulgarien",CH:"Schweiz",CY:"Zypern",CZ:"Tschechische Republik",DK:"Dänemark",DE:"Deutschland",EE:"Estland",ES:"Spanien",FI:"Finnland",FR:"Frankreich",GB:"Vereinigtes Königreich",GR:"Griechenland",HR:"Kroatien",HU:"Ungarn",IE:"Irland",IT:"Italien",LT:"Litauen",LU:"Luxemburg",LV:"Lettland",MT:"Malta",NL:"Niederlande",PL:"Polen",PT:"Portugal",RO:"Rumänien",SE:"Schweden",SI:"Slowenien",SK:"Slowakei",CLAIM_DIALOG:'Möchten Sie das Dokument in "Mein Smartlaw" speichern? Sie können das gespeicherte Dokument später öffnen, bearbeiten oder drucken.',YES:"Ja",NO:"Nein",common:{nav:{register:"Registrieren",login:"Login",search:{placeholder:"Suche"}},header:{help:"Hilfe"}},nav:{register:"Registrieren",login:"Login",search:{placeholder:"Suche"},changePassword:"Passwort ändern",profile:"Profil",logout:"Abmelden"},"back-to-smartlaw":"Zurück zu Smartlaw",header:{help:"Kontakt"},contact:{formular:{open:"Kontaktformular verwenden"}}},document:{lang:"de-DE",titlePrefix:"Smartlaw Vorschau",nextButton:"Weiter",error:{generalTitle:"Verzeihung, es ist ein Fehler aufgetreten.",general:"Leider konnte aus technischen Gründen kein Dokument erstellt werden. Bei Fragen wenden Sie sich bitte an unser Serviceteam.",previewGenerationErrorMessage:"Leider konnte aus technischen Gründen kein Dokument erstellt werden. Bitte wenden Sie sich an unser Serviceteam oder direkt an {{emailAddress}}.",buttonPrimary:"Service kontaktieren"},linkLabelDownload:"Herunterladen",linkLabelBuy:"Kostenpflichtig herunterladen",linkLabelDownloadForFree:"Kostenlos herunterladen",inclVat:"inkl. MwSt.",planBoxHeader:"Auf Basis Ihrer Antworten hat Smartlaw ein für Sie optimiertes Dokument erstellt. Bitte wählen Sie eine Zahlungsoption:",planBoxTrialLabel:"Die ersten {0} Tage kostenlos, danach {1} im Monat",orSeparator:"Oder",purchase:{subscription:{title:"14 Tage Smartlaw-Abo testen",subtitle:"Kostenlos und ohne Risiko",c2aLabel:"Dokument herunterladen",trialLabel:"{1} im Monat nach Ablauf der Testphase",trialLabelWithoutPrice:"Kostenpflichtig erst nach Ablauf der Testphase",productSelectLabel:"{0} mtl. im {1}"},oneTime:{title:"Einzeldokument kaufen",c2aLabel:"Kostenpflichtig herunterladen"}},ribbonLabelPreviewPage:"Seite",linkLabelHeaderReturnToQuestions:"Zurück zu den Fragen",textLabelDownloadPDFReader:'Zum Öffnen von PDF-Dateien benötigen Sie den Adobe Reader, den Sie <a href="http://get.adobe.com/reader/" target="blank">hier</a> kostenlos herunterladen können.',textLabelDownloadPackage:"Ihr Dokument samt wichtigen Verwendungshinweisen und Anlagen steht als ZIP-Archiv zum Download bereit.",linkLabelShareDocument:"Freigabe für Weiterbearbeitung",dialog:{documentClaim:{title:'Unter "Meine Dokumente" speichern',bodyMessage:'Möchten Sie das Dokument in "Meine Dokumente" speichern? Sie können das gespeicherte Dokument später öffnen, bearbeiten oder drucken.',buttonLabelConfirm:"Ja",buttonLabelCancel:"Nein",successToast:'Das Dokument wurde zu "Meine Dokumente" hinzugefügt.'},deleteDocument:{title:"Dokument löschen",bodyMessage:"Möchten Sie das Dokument endgültig löschen?",buttonLabelConfirm:"Löschen",buttonLabelCancel:"Abbrechen"},confirmEmail:{buttonLabelCancel:"Schließen",buttonLabelResend:"Bestätigungslink zusenden",successToast:"Die Aktivierungs-Aufforderung wurde an die hinterlegte E-Mail-Adresse verschickt. Bitte überprüfen Sie in Kürze Ihren Posteingang."},shareDocument:{title:"Freigeben für Weiterbearbeitung",description:"Sie können Ihr Dokument nun für die Weiterbearbeitung freigeben. Wenn Sie wünschen können Sie für die Freigabe eine Nachricht für den Bearbeiter ergänzen.",customMessage:{placeholder:"Nachricht hier eingeben ..."},buttonLabelCancel:"Abbrechen",buttonLabelSubmit:"Freigeben",successToast:"Ihr Dokument wurde freigegeben.",errorToast:"Verzeihung, das Dokument konnte nicht freigegeben werden. Bitte versuchen Sie es später erneut."},invalidDocument:{buttonLabelCancel:"Zurück",buttonLabelCreateNew:"Neu erstellen"},downloadNotEntitled:{downloadDeadline:{title:"Die Downloadfrist für Ihr Dokument ist leider abgelaufen",bodyMessage:"Buchen Sie jetzt in einen passenden Smartlaw-Tarif, um das Dokument als DOC oder RTF herunterzuladen",buttonLabelConfirm:"Tarif buchen",buttonLabelCancel:"Nein, danke"},wrongRateplan:{title:"Das Dokument ist in Ihrem Smartlaw-Tarif nicht verfügbar",bodyMessage:"Um das Dokument herunterzuladen, können Sie jetzt in einen passenden Tarif wechseln.",buttonLabelConfirm:"Tarif wechseln",buttonLabelCancel:"Nein, danke"},noSubscription:{title:"Sie haben derzeit keinen Smartlaw-Tarif gebucht",bodyMessage:"Um das Dokument als DOC oder RTF herunterzuladen, wählen Sie jetzt einen passenden Tarif aus.",buttonLabelConfirm:"Tarif buchen",buttonLabelCancel:"Nein, danke"}},dateSelect:{title:"Datum wählen",bodyMessage:"Ausgewähltes Datum:",buttonLabelCancel:"Abbrechen",buttonLabelConfirm:"Bestätigen"},messageDetails:{buttonLabelArchive:"Nicht mehr anzeigen",buttonLabelClose:"OK"},guaranteeSeal:{buttonLabelClose:"OK"}},entitlements:{loading:{header:"Einen kurzen Moment bitte...",details:"Ihre Downloadberechtigungen werden geladen. Dies kann einige Sekunden in Anspruch nehmen."},error:{header:"Es ist ein Fehler aufgetreten ...",details:"Die Zugriffsberechtigung für dieses Dokument konnte nicht festgestellt werden.\nBitte kontaktieren Sie unseren Kundenservice."}},products:{loading:{header:"Einen kurzen Moment bitte...",details:"Passende Tarife werden ermittelt."}},downloadStarting:"Download startet in Kürze...",details:{isLoading:"Wird geladen…",inProgress:"In Bearbeitung","continue":"Fortsetzen",edit:"Bearbeiten",invalidDocumentLabel:"Dokument nicht mehr gültig",zoomIn:"Vergrößern",folderSelection:{header:"Zu Akte hinzufügen",content:"Fügen Sie das Dokument einer bestehenden Akte hinzu oder legen Sie eine neue Akte an. Mit Akten ordnen Sie Ihre Dokumente und erhalten von uns Vorschläge für weitere Schritte.",cancel:"Abbrechen",confirm:"Weiter",openFolderSelection:"Zu Akte hinzufügen",selectFolder:"Akte auswählen",newFolders:"Neue Akte anlegen",availableFolders:"Bestehende Akten"},projections:{title:{objects:"Objekte",subjects:"Personen und Organisation",termsAndConditions:"Regelungen",properties:"Zusätzliche Daten"},emptyState:"Zu diesem Dokument gibt es noch keine detaillierten Daten. Bitte beantworten Sie zunächst die Fragen.",edit:"Dokument bearbeiten"},section:{information:"Informationen",notifications:{title:"Benachrichtigungen",description:"Wir benachrichtigen Sie bei Rechtsänderungen und vor dem Ablauf von Fristen. Hier erfahren Sie auf einen Blick, ob Sie aktiv werden müssen:"}},error:{couldNotLoadInformation:"Entschuldigung, die Informationen zu diesem Dokument konnten nicht geladen werden."},editTitleLabel:"Dokumententitel bearbeiten",cloneDocumentLabel:"Dokument duplizieren",clonedDocumentTitlePostfix:" - Kopie",cloneSuccess:"Das Dokument wurde dupliziert.",cloneError:"Entschuldigung, beim Duplizieren ist ein Fehler aufgetreten.",deleteDocumentLabel:"Dokument löschen",deleteSuccess:"Das Dokument wurde gelöscht.",deleteError:"Entschuldigung, beim Löschen ist ein Fehler aufgetreten."},alert:{invalidDocument:{title:"Dieses Dokument ist nicht mehr aktuell",message:"Seit Sie dieses Dokument begonnen haben, hat sich die Rechtslage geändert. Wir haben die Inhalte entsprechend aktualisiert. Bitte starten Sie den Frage-Antwort-Dialog neu, um ein Dokument in der aktuellen Version zu erstellen.",messageFinished:"Seit Sie dieses Dokument erstellt haben, hat sich die Rechtslage geändert. Wir haben die Inhalte entsprechend aktualisiert. Bitte starten Sie den Frage-Antwort-Dialog neu, um ein Dokument in der aktuellen Version zu erstellen.",buttonPrimary:"Neu erstellen"},finishedDocument:{title:"Laden Sie Ihr Dokument herunter",message:"Ihr Dokument ist fertig und zum Download bereit. Laden Sie jetzt Ihr Dokument im gewünschten Format (WORD oder PDF) herunter.",buttonPrimary:"Herunterladen"},unfinishedDocument:{title:"Beenden Sie die Dokumentenerstellung",message:"Die Dokumentenerstellung ist zu {0}% abgeschlossen. Um das Dokument herunterladen zu können, müssen Sie es fertigstellen.",buttonPrimary:"Fortsetzen"},message:{buttonPrimary:"Weiterlesen"},property:{buttonPrimary:"Datum wählen"},addToFolder:{title:"Fügen Sie Ihr Dokument einer Akte hinzu.",message:"Die intelligenten Smartlaw-Akten geben Ihnen Tipps, wie Sie diese Rechtsbeziehung mit ergänzenden Dokumenten zu Ihrem Vorteil gestalten können.",buttonPrimary:"Zu Akte hinzufügen"}},author:{title:"Unser Rechtsexperte für dieses Dokument:"},cdp:{message:"Seit Inkrafttreten der DSGVO am 25. Mai 2018 ist Smartlaw gesetzlich verpflichtet, eine Einwilligung zur Verarbeitung Ihrer Daten von Ihnen einzuholen.",button:"Einwilligung erteilen"}}},en:{common:{AT:"Austria",BE:"Belgium",BG:"Bulgaria",CH:"Switzerland",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DE:"Germany",EE:"Estonia",ES:"Spain",FI:"Finland",FR:"France",GB:"United Kingdom",GR:"Greece",HR:"Croatia",HU:"Hungary",IE:"Ireland",IT:"Italy",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",MT:"Malta",NL:"Netherlands",PL:"Poland",PT:"Portugal",RO:"Romania",SE:"Sweden",SI:"Slovenia",SK:"Slovakia",CLAIM_DIALOG:"Do you want to add this document to your Dashboard? From the Dashboard you will be able to edit and download this document.",YES:"Yes",NO:"No",common:{nav:{register:"Register",login:"Login",search:{placeholder:"Search"}},header:{help:"Help"}},nav:{register:"Register",login:"Login",search:{placeholder:"Search"},changePassword:"Change password",profile:"Profile",logout:"Logout"},"back-to-smartlaw":"Back to Smartlaw",header:{help:"Contact"},contact:{formular:{open:"open Contact Form"}}},document:{lang:"en-US",titlePrefix:"Document",nextButton:"Next",error:{generalTitle:"Oops, something went wrong",general:"We are sorry, the document could not be loaded. Please try again or get in touch with our service team.",previewGenerationErrorMessage:"We are sorry, the preview could not be created. Please email us at {{emailAddress}}.",buttonPrimary:"Contact customer support"},linkLabelDownload:"Download",linkLabelBuy:"Buy",linkLabelDownloadForFree:"Download for free",inclVat:"incl. VAT",planBoxHeader:"Based on your answers, Smartlaw has created a document optimized for you. Please choose a payment option:",planBoxTrialLabel:"The first {0} days for free, then {1} per month",orSeparator:"Or",purchase:{subscription:{title:"Try Smartlaw for free",subtitle:"Free and without risk",c2aLabel:"Download Document",trialLabel:"{1} per month after test period is over",trialLabelWithoutPrice:"Free during the testing period",productSelectLabel:"Only {0} per month - {1}"},oneTime:{title:"Buy this document",c2aLabel:"Buy & Download"}},ribbonLabelPreviewPage:"Page",linkLabelHeaderReturnToQuestions:"Return to questions",textLabelDownloadPDFReader:'For viewing PDF files a PDF reader program is required. Adobe Reader is available free of charge from <a href="http://get.adobe.com/reader/" target="blank">http://get.adobe.com/reader/</a>',textLabelDownloadPackage:"Your document along with important instructions and attachments is available for download as zip package.",linkLabelShareDocument:"Forward Document",dialog:{documentClaim:{title:"Assign Document to Account",bodyMessage:"Do you want to add this document to your Dashboard? From the Dashboard you will be able to edit and download this document.",buttonLabelConfirm:"Yes",buttonLabelCancel:"No",successToast:"The document was assigned to your account."},deleteDocument:{title:"Delete document",bodyMessage:"Are you sure, that you want to delete this document? This operation can not be undone.",buttonLabelConfirm:"Delete",buttonLabelCancel:"Cancel"},confirmEmail:{buttonLabelCancel:"Cancel",buttonLabelResend:"Resend confirmation link",successToast:"The activation request was resent. Please check your emails in a minute."},shareDocument:{title:"Submit for review",description:"When you press submit the document will be submitted for review. You can enter an optional message to the reviewer.",customMessage:{placeholder:"Type your message here..."},buttonLabelCancel:"Cancel",buttonLabelSubmit:"Submit",successToast:"Your document has been submitted.",errorToast:"Sorry, your document could not be sent. Please try again later."},invalidDocument:{buttonLabelCancel:"Cancel",buttonLabelCreateNew:"Start again"},downloadNotEntitled:{downloadDeadline:{title:"Single Document purchase - 7 days passed",bodyMessage:"The DOC and RTF download options have expired. Please subscribe to a plan in order to download the DOC and RTF version this document.",buttonLabelConfirm:"Subscribe now",buttonLabelCancel:"No, thanks"},wrongRateplan:{title:"Rateplan not fitting",bodyMessage:"This document is not included in your subscription. Please upgrade your plan in order to download this document.",buttonLabelConfirm:"Upgrade now",buttonLabelCancel:"No, thanks"},noSubscription:{title:"Subscription cancelled/no subscription",bodyMessage:"You are not subscribed to Smartlaw. Please subscribe to a plan in order to download the DOC and RTF version this document.",buttonLabelConfirm:"Subscribe now",buttonLabelCancel:"No, thanks"}},dateSelect:{title:"Select date",bodyMessage:"You have selected:",buttonLabelCancel:"Cancel",buttonLabelConfirm:"Submit"},messageDetails:{buttonLabelArchive:"Do not show again",buttonLabelClose:"OK"},guaranteeSeal:{buttonLabelClose:"OK"}},entitlements:{loading:{header:"Please stand by...",details:"We are loading your document entitlements. This may take several seconds."},error:{header:"An error has occurred",details:"Access rights for your document could not be determined. Please contact the service team."}},products:{loading:{header:"Please stand by...",details:"We are loading suitable products for this document."}},downloadStarting:"Starting download...",details:{isLoading:"Is loading…",inProgress:"In progress","continue":"Continue",edit:"Edit",invalidDocumentLabel:"The document is not longer valid",zoomIn:"Zoom in",
folderSelection:{header:"Add to a folder",content:"You can select a folder from the drop down below!",cancel:"cancel",confirm:"confirm",openFolderSelection:"Click to select a folder",selectFolder:"Please select a folder",newFolders:"Select a new folder to create",availableFolders:"Select an already existing folder"},projections:{title:{objects:"Objects",subjects:"Subjects",termsAndConditions:"Terms and Conditions",properties:"Additional Data"},emptyState:"No further information for this document.",edit:"Edit document"},section:{information:"Information",notifications:{title:"Notifications",description:"Smartlaw notifies you in case of relevant legal changes and due dates regarding your contracts."}},error:{couldNotLoadInformation:"Sorry, but document-related information could not be loaded."},editTitleLabel:"Edit title",cloneDocumentLabel:"Clone document",clonedDocumentTitlePostfix:" - Copy",cloneSuccess:"The document was cloned.",cloneError:"Sorry, but an error has occurred while cloning the document.",deleteDocumentLabel:"Delete document",deleteSuccess:"The document has been deleted.",deleteError:"Sorry, but an error has occurred while deleting the document."},alert:{invalidDocument:{title:"This document is not longer valid!",message:"The legal situation has changed since you have started this document. Please complete the interview again.",messageFinished:"The legal situation has changed since you have completed this document. Please complete the interview again.",buttonPrimary:"Start interview"},finishedDocument:{title:"Please download your document.",message:"Your document is complete and ready for download. Please download your document in the desired format (WORD or PDF).",buttonPrimary:"Download"},unfinishedDocument:{title:"The document creation process is incomplete.",message:"Your document completion ratio is {0} percent. Please answer all questions to be able to download the document.",buttonPrimary:"Resume"},message:{buttonPrimary:"Read more"},property:{buttonPrimary:"Choose date"},addToFolder:{title:"Add your document to a folder.",message:"The intelligent Smartlaw-folders give you tips on how you can enhance this legal relationship with additional documents to your advantage.",buttonPrimary:"Add to folder"}},author:{title:"Our legal expert for this document"},cdp:{message:"Since 25 May 2018 Smartlaw is legally required to obtain your consent for processing your personal data.",button:"CDP Agreement"}}},cs:{common:{AT:"Rakousko",BE:"Belgie",BG:"Bulharsko",CH:"Švýcarsko",CY:"Kypr",CZ:"Česká republika",DK:"Dánsko",DE:"Německo",EE:"Estonsko",ES:"Španělsko",FI:"Finsko",FR:"Francie",GB:"Spojené království Velké Británie a Severního Irska",GR:"Řecko",HR:"Chorvatsko",HU:"Maďarsko",IE:"Irsko",IT:"Itálie",LT:"Litva",LU:"Lucembursko",LV:"Lotyšsko",MT:"Malta",NL:"Nizozemí",PL:"Polsko",PT:"Portugalsko",RO:"Rumunsko",SE:"Švédsko",SI:"Slovinsko",SK:"Slovensko",CLAIM_DIALOG:"Chcete tento dokument přidat na pracovní plochu? Dokument budete moci upravovat později.",YES:"Ano",NO:"Ne",common:{nav:{register:null,login:null,search:{placeholder:null}},header:{help:null}},nav:{register:"Registrovat",login:"Přihlásit",search:{placeholder:"Hledat"},changePassword:"Změnit heslo",profile:"Profil",logout:"Odhlásit se"},"back-to-smartlaw":"Zpátky do Smartlaw",header:{help:"Kontakt"},contact:{formular:{open:"otevřít kontaktní formulář"}}},document:{lang:"en-US",titlePrefix:"Dokument",nextButton:"Další",error:{generalTitle:"Vyskytla se chyba!",general:"Vyskytla se chyba. Kontaktujte prosím naši zákaznickou linku.",previewGenerationErrorMessage:'Vyskytla se chyba. Kontaktujte prosím naši <a href="http://www.smartlaw.cz">zákaznickou linku</a>.',buttonPrimary:"Kontaktovat oddělení podpory"},linkLabelDownload:"Stáhnout",linkLabelBuy:"Koupit",linkLabelDownloadForFree:"Stáhnout",inclVat:"včetně dph",planBoxHeader:"Na základě vašich odpovědí Smartlaw vytvořil nový dokument. Prosím vyberte platební možnost:",planBoxTrialLabel:"Prvních {0} dní zdarma, poté za cenu {1} měsíčně",orSeparator:"Nebo",purchase:{subscription:{title:"Vyzkoušet Smartlaw zdarma",subtitle:"Zdarma a bez rizika",c2aLabel:"Stáhnout tento dokument",trialLabel:"Uplynulo {1} za měsíc pro testovací účely",trialLabelWithoutPrice:"Během testovacího období zdarma.",productSelectLabel:"Pouze {0} za měsíc - {1}"},oneTime:{title:"Koupit tento dokument",c2aLabel:"Koupit a stáhnout"}},ribbonLabelPreviewPage:"Strana",linkLabelHeaderReturnToQuestions:"Zpět na otázky",textLabelDownloadPDFReader:'Pro zobrazení PDF souborů je potřeba program pro jejich čtení. Adobe Reader je k dispozici zadarmo z adresy:<a href="http://get.adobe.com/reader/" target="_blank">get.adobe.com/reader</a>.',textLabelDownloadPackage:"Váš dokument spolu s důležitými pokyny a přílohami je k dispozici ke stažení jako zip soubor.",linkLabelShareDocument:"Zaslat dokument pro revizi",dialog:{documentClaim:{title:"Přiřadit dokument k účtu",bodyMessage:"Chcete tento dokument přidat na pracovní plochu? Dokument budete moci upravovat později.",buttonLabelConfirm:"Ano",buttonLabelCancel:"Ne",successToast:"Dokument byl přiřazen vašemu účtu."},deleteDocument:{title:"Smazat dokument",bodyMessage:"Jste si jisti, že chcete vymazat tento dokument? Tato operace nelze vrátit.",buttonLabelConfirm:"Smazat",buttonLabelCancel:"Zrušit"},confirmEmail:{buttonLabelCancel:"Zrušit",buttonLabelResend:"Poslat znovu potvrzovací odkaz",successToast:"Požadavek na aktivaci byl zaslán znovu, zkontrolujte prosím vaši poštu."},shareDocument:{title:"Poslat dokument",description:"Chcete zaslat Vaši smlouvu KVB advokátní kanceláři s.r.o. ke kontrole a revizi? Do kolonky níže případně uveďte Vaše požadavky týkající se smlouvy. Např. uvedení konkrétního ustanovení, které chcete do smlouvy doplnit, doplňujících informací týkajících se okolností uzavírání smlouvy apod.",customMessage:{placeholder:"Vložte dodatečný text zde..."},buttonLabelCancel:"Zrušit",buttonLabelSubmit:"Potvrdit",successToast:"Děkuji. Váš dokument byl úspěšně odeslán.",errorToast:"Omlouváme se, nastala chyba při odesílání Vašeho dokumentu. Kontaktujte prosím zákaznickou linku."},invalidDocument:{buttonLabelCancel:"Zrušit",buttonLabelCreateNew:"Začít znovu"},downloadNotEntitled:{downloadDeadline:{title:"Zakoupení jednoho dokumentu - uplynulo 7 dní",bodyMessage:"Možnosti stahování DOC a RTF vypršely. Přihlaste se k odběru plánu, abyste si stáhli DOC a RTF verze dokumentů.",buttonLabelConfirm:"Přihlásit se k odběru",buttonLabelCancel:"Ne, děkuji"},wrongRateplan:{title:"Hodnotící plán nesouhlasí",bodyMessage:"Vybraný dokument není součástí vašeho předplatného. Pro stažení tohoto dokumentu si zakupte vhodný produkt.",buttonLabelConfirm:"Aktualizovat teď",buttonLabelCancel:"Ne, děkuji"},noSubscription:{title:"Předplatné zrušeno/žádné předplatné",bodyMessage:"Nejte přihlášeni do Smartlaw. Promožnost stažení DOC a RTF verze tohoto dokumentu se přihlašte k svému předplatnému.",buttonLabelConfirm:"Přihlásit teď",buttonLabelCancel:"Ne, děkuji"}},dateSelect:{title:"Zvolte datum",bodyMessage:"Vybrali jste:",buttonLabelCancel:"Zrušit",buttonLabelConfirm:"Potvrdit"},messageDetails:{buttonLabelArchive:"Znovu nezobrazovat",buttonLabelClose:"Ok"},guaranteeSeal:{buttonLabelClose:"Ok"}},entitlements:{loading:{header:"Prosím počkejte...",details:"Dokumenty jsou načítány, může to trvat několik vteřin."},error:{header:"Vyskytla se chyba!",details:"Přístupová práva k vašim dokumentům nemůžou být odebrána. V případě problémů se prosím obraťte na naši technickou podporu."}},products:{loading:{header:"Prosím počkejte...",details:"Nahrávají se vhodné produkty k tomuto dokumentu."}},downloadStarting:"Zahajuji stahování...",details:{isLoading:"Načítá se...",inProgress:"Probíhá","continue":"Pokračovat",edit:"Upravit",invalidDocumentLabel:"Dokument není validní",zoomIn:"Přiblížit",folderSelection:{header:"Přidat do složky",content:"Zvolte složku z menu níže.",cancel:"zrušit",confirm:"Potvrdit",openFolderSelection:"Klikněte pro výběr složky",selectFolder:"Zvolte složku",newFolders:"Vyberte novou složku k vytvoření",availableFolders:"Vyberte existující složku"},projections:{title:{objects:"Objekty",subjects:"Předměty",termsAndConditions:"Pravidla a podmínky",properties:"Doplňující údaje"},emptyState:"K tomuto dokumentu nejsou žádné další informace.",edit:"Upravit"},section:{information:"Informace",notifications:{title:"Notifikace",description:"Smartlaw notifikace vás upozorní v případě příslušných právních změn a termínů splatnosti vašich smluv."}},error:{couldNotLoadInformation:"Omlouváme se, ale informace propojené s tímto dokumentem nemohly být načteny."},editTitleLabel:"Upravit",cloneDocumentLabel:"Duplikát",clonedDocumentTitlePostfix:" - Kopírovat",cloneSuccess:"Dokument byl zduplikován.",cloneError:"Omlouváme se, během duplikování dokumentu došlo k chybě.",deleteDocumentLabel:"Smazat dokument",deleteSuccess:"Dokument byl vymazán.",deleteError:"Omlouváme se, během mazání dokumentu došlo k chybě."},alert:{invalidDocument:{title:"Dokument není validní!",message:"Právní situace se od započtení vaší práce na tomto dokumentu změnila. Prosím začněte s interview znovu.",messageFinished:"Právní situace se od dokončení vaší práce na tomto dokumentu změnila. Prosím začněte s interview znovu.",buttonPrimary:"Začít interview"},finishedDocument:{title:"Prosím stáhněte si váš dokument",message:"Váš dokument je připraven ke stažení. Zvolte si vhodný formát pro uložení (WORD nebo PDF).",buttonPrimary:"Stáhnout"},unfinishedDocument:{title:"Proces vytváření dokumentu je nekompletní.",message:"Dokument je dokončen z {0} %. Po zozpovězení všech dotazů se nabídne možnost pro stažení dokumentu.",buttonPrimary:"Obnovit"},message:{buttonPrimary:"Číst více"},property:{buttonPrimary:"Zvolte datum"},addToFolder:{title:"Přidat váš dokument do složky.",message:"Inteligentní složky Smartlaw vám poskytují tipy, jak pomocí souvisejících dokumentů vylepšit váš právní vztah.",buttonPrimary:"Přidat do složky"}},author:{title:"Náš právní expert pro tento dokument"},cdp:{message:null,button:null}}}}),angular.module("document-client").filter("money",function(){var a=function(a,b,c,d){var e=0>a?"-":"",f=parseInt(a=Math.abs(+a||0).toFixed(b))+"",g=f.length,h=g>3?g%3:0;return e+(h?f.substr(0,h)+d:"")+f.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+d)+(b?c+Math.abs(a-f).toFixed(b).slice(2):"")},b="€",c=2,d=",",e=".";return function(f,g,h,i,j){g=g||b,h=h||c,i=i||d,j=j||e;var k=a(f,h,i,j);return k+" "+g}}),angular.module("document-client").filter("stringFormat",["lodash",function(a){var b=a,c=function(a,b){return a.replace(/{(\d+)}/g,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})};return function(){var a=arguments[0],d=b.slice(arguments,1);return c(a,d)}}]),angular.module("document-client").filter("lascaSort",[function(){return function(a,b,c){var d=[];return angular.forEach(a,function(a){d.push(a)}),d.sort(function(a,c){return lasca.compare(a[b],c[b])}),c&&d.reverse(),d}}]),angular.module("document-client").factory("restUrlsService",["baseUrl",function(a){return this.appPrefix=a,{base:this.appPrefix,users:this.appPrefix+"/users/:uid",documents:this.appPrefix+"/documents/:sid",products:this.appPrefix+"/products",entitlement:this.appPrefix+"/entitlement",claim:this.appPrefix+"/document/:id/claim",confirmationEmailUrl:this.appPrefix+"/users/me/sendActivationEmail"}}]),angular.module("document-client").factory("helperService",["$log",function(a){return{getRandomInt:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},getEntitlementUsageUserId:function(b){return _.isObject(b)&&_.isString(b.id)?(_.isObject(b.account)&&_.isString(b.account.id)||a.error("Account id must be set"),b.account.id+"/"+b.id):void 0}}}]),angular.module("document-client").service("entitlementService",EntitlementService),EntitlementService.$inject=["$http","baseUrl","helperService"],angular.module("document-client").factory("previewService",["$resource","$http","$q","restUrlsService","lodash",function(a,b,c,d,e){var f=e;return{sendActivationEmail:function(a){return b.post(d.confirmationEmailUrl,{sessionId:a})},getProducts:function(a){return b.get(d.products,{params:{resourceName:a}}).then(function(a){return a.data})},findBestProduct:function(a,b){var c=f.filter(a,{oneTime:b}),d=f.minBy(c,"charge.price");return d},findSubscriptionProducts:function(a){var b=f.filter(a,{oneTime:!1});return b}}}]),angular.module("document-client").service("sessionService",SessionService),SessionService.$inject=["$http","$q","$cacheFactory","baseUrl"],angular.module("document-client").service("userService",UserService),UserService.$inject=["baseUrl","$http"],angular.module("document-client").service("headerModelService",HeaderModelService),HeaderModelService.$inject=["$rootScope"],angular.module("document-client").service("projectionService",ProjectionService),ProjectionService.$inject=["$http","baseUrl"],angular.module("document-client").service("documentControllerService",DocumentControllerService),DocumentControllerService.$inject=["$log","$q","$translate","$routeParams","$location","dialogFactory","$timeout","toaster","Analytics","headerModelService","userService","sessionService","entitlementService","customerJourneyService","actionMenuService","previewService"],angular.module("document-client").service("downloadService",DownloadService),DownloadService.$inject=["$rootScope","baseUrl","$translate","toaster","tenantConfigurationService","entitlementService","emailConfirmationService","documentControllerService"],angular.module("document-client").service("emailConfirmationService",EmailConfirmationService),EmailConfirmationService.$inject=["dialogFactory","$translate","toaster","userService","previewService","$rootScope"],angular.module("document-client").factory("documentFolderModelService",["baseUrl","$http",function(a,b){function c(){f={sessionId:void 0,publicationId:void 0,promise:void 0}}function d(a,b){return a+b!=f.sessionId+f.publicationId&&(f={sessionId:a,publicationId:b,promise:void 0}),f.promise}function e(a){f.promise=a}var f;return c(),{saveDocumentFolder:function(d,e){return b.put(a+"/relationships",e,{params:{sessionId:d}}).then(function(a){return c(),a})},getDocumentFolderModel:function(c,f){var g=d(c,f);return g||(g=b.get(a+"/relationshipModel/bySessionOrPublication",{params:{sessionId:c,publicationId:f}}),e(g)),g}}}]),angular.module("document-client").service("documentPropertiesService",DocumentPropertiesService),DocumentPropertiesService.$inject=["$http","baseUrl","$filter","$timeout"],angular.module("document-client").service("messageService",MessageService),MessageService.$inject=["$http","baseUrl","$log"],angular.module("document-client").factory("trackingService",TrackingService),TrackingService.$inject=["Analytics","$filter","$q","$timeout"],angular.module("document-client").directive("onImageLoad",function(){return{restrict:"A",link:function(a,b,c){b.bind("load",function(){a.$apply(c.onImageLoad)})}}}),angular.module("document-client").directive("onImageError",function(){return{restrict:"A",link:function(a,b,c){b.bind("error",function(){a.$apply(c.onImageError)})}}}),angular.module("document-client").directive("slPreviewUrlsSpinner",["$window",function(a){return{restrict:"A",link:function(b,c){var d=new a.Spinner;d.spin(c[0]),b.$watch("previewStatus.loadFinished",function(a){a&&d.stop()})}}}]),angular.module("document-client").directive("slMarkdown",["lodash",function(){return{restrict:"A",scope:{text:"<"},compile:function(){var a=new marked.Renderer;return a.paragraph=function(a){return a},function(b,c){b.$watch("text",function(){if(b.text){var d=marked(b.text,{renderer:a});c.empty(),c.append(d)}})}}}}]),angular.module("document-client").component("dateDialog",{templateUrl:"scripts/date-dialog/date-dialog.component.html",bindings:{resolve:"<",close:"&",dismiss:"&"},controller:DateDialogCtrl}),angular.module("document-client").component("emailConfirmDialog",{templateUrl:"scripts/email-confirm-dialog/email-confirm-dialog.component.html",bindings:{resolve:"<",close:"&",dismiss:"&"},controller:EmailConfirmDialogCtrl}),angular.module("document-client").component("slDocumentPreviewDialog",{bindings:{resolve:"<",dismiss:"&"},templateUrl:"scripts/document-preview-dialog/document-preview-dialog.component.html",controller:DocumentPreviewDialogController}),DocumentPreviewDialogController.$inject=["$scope","$log","$routeParams","$timeout","Analytics","sessionService","downloadService","documentControllerService"],angular.module("document-client").component("guaranteeSealDialog",{templateUrl:"scripts/guarantee-seal-dialog/guarantee-seal-dialog.component.html",bindings:{resolve:"<",close:"&",dismiss:"&"},controller:GuaranteeSealDialogCtrl}),GuaranteeSealDialogCtrl.$inject=["Analytics"],angular.module("document-client").component("shareDocumentComponent",{templateUrl:"scripts/share-document-dialog/share-document.component.html",bindings:{close:"&",dismiss:"&"},controller:SendAsEmailController}),angular.module("document-client").factory("shareDocumentDialog",["$uibModal",function(a){return function(){return a.open({animation:!0,component:"shareDocumentComponent",windowClass:"share-document-dialog"}).result.then(function(a){return{send:!0,data:a}})["catch"](function(){return{send:!1}})}}]),angular.module("document-client").component("slDocumentPreview",{bindings:{sessionId:"<",documentPromise:"<",entitlementsPromise:"<",documentCanonicalName:"<",hasError:"<",onError:"&"},templateUrl:"scripts/document-preview/document-preview.component.html",controller:DocumentPreviewController}),DocumentPreviewController.$inject=["$scope","$routeParams","$timeout","dialogFactory","customerJourneyService","Analytics","sessionService","entitlementService","tenantConfigurationService","downloadService","baseUrl"],angular.module("document-client").component("dialogComponent",{bindings:{resolve:"<",close:"&",dismiss:"&"},templateUrl:"scripts/components/dialog/dialog.component.html",controller:DialogComponentController}),angular.module("document-client").factory("dialogFactory",["$uibModal","lodash","$translate",dialogFactoryProvider]),angular.module("document-client").component("slTitleInput",{bindings:{sessionId:"<",document:"=",cloneDocument:"&",isCloneDocumentDisabled:"<",deleteDocument:"&"},templateUrl:"scripts/components/title-input/title-input.component.html",controller:TitleInputComponentController}),TitleInputComponentController.$inject=["$log","$timeout","$scope","sessionService","Analytics"],angular.module("document-client").controller("PreviewCtrl",PreviewCtrl),PreviewCtrl.$inject=["lodash","$log","$scope","$translate","$location","vwo","customerJourneyService","$anchorScroll","$routeParams","documentControllerService","entitlementService","headerModelService","sessionService","Analytics","mouseflow","tenantConfigurationService","toaster","$q","$window","shareDocumentDialog"],angular.module("document-client").component("slDownloadAndPurchase",{bindings:{sessionId:"<",documentPromise:"<",entitlementsPromise:"<",hasError:"<",onError:"&",onShare:"&"},templateUrl:"scripts/preview/download-and-purchase/download-and-purchase.component.html",controller:DownloadAndPurchaseCtrl}),DownloadAndPurchaseCtrl.$inject=["lodash","$window","$filter","$location","$sce","$q","$log","$translate","baseUrl","toaster","tenantConfigurationService","previewService","entitlementService","userService","downloadService","documentControllerService","Analytics","sharedProfileService"],angular.module("document-client").component("slPlanBox",{bindings:{sessionId:"<",title:"<",subtitle:"<",product:"<",productBenefits:"<",isPrimary:"<",document:"<",showLabelWithoutPrice:"<",buttonLabelKey:"@"},templateUrl:"scripts/preview/plan-box/plan-box.component.html",controller:PlanBoxCtrl}),PlanBoxCtrl.$inject=["$timeout","Analytics","customerJourneyService"],angular.module("document-client").component("slAuthorInformation",{bindings:{author:"<"},templateUrl:"scripts/preview/author-information/author-information.component.html",controller:AuthorInformationCtrl}),angular.module("document-client").controller("DetailsCtrl",DetailsCtrl),DetailsCtrl.$inject=["$translate","$location","$log","$window","$routeParams","$scope","toaster","vwo","customerJourneyService","documentControllerService","downloadService","headerModelService","sessionService","dialogFactory","Analytics","$timeout","documentFolderModelService","emailConfirmationService","mouseflow","messageService","entitlementService","lodash","sharedFeatureService"],angular.module("document-client").component("slDocumentFolderView",{bindings:{documentFolderModel:"<",onDocumentFolderSelected:"&"},templateUrl:"scripts/details/document-folder-view/document-folder-view-component.html",controller:DocumentFolderViewController}),DocumentFolderViewController.$inject=["$log","dialogFactory","$scope","lodash"],angular.module("document-client").component("slDocumentFolderSelectionModal",{bindings:{resolve:"<",close:"&",dismiss:"&"},templateUrl:"scripts/details/document-folder-view/document-folder-selection-modal.html",controller:DocumentFolderSelectionModalController}),DocumentFolderSelectionModalController.$inject=["$log"],angular.module("document-client").component("slDetailsPreview",{bindings:{sessionId:"<",document:"<",entitlements:"<",user:"<",hasError:"<",onError:"&",onDownloadFormatReady:"&",cdpAcceptanceMissing:"<"},templateUrl:"scripts/details/details-preview/details-preview.component.html",controller:DetailsPreviewController}),DetailsPreviewController.$inject=["$q","dialogFactory","$log","userService","sessionService","downloadService","entitlementService","documentControllerService","Analytics"],angular.module("document-client").component("slDetailsData",{bindings:{sessionId:"<",documentPromise:"<",entitlementsPromise:"<",hasError:"<",onEdit:"&",projectionsActivated:"<",propertiesActivated:"<"},templateUrl:"scripts/details/details-data/details-data.component.html",controller:DetailsDataController}),DetailsDataController.$inject=["$scope","$q","$log","projectionService","entitlementService","documentPropertiesService"],angular.module("document-client").component("slProjectionEntity",{bindings:{projections:"<",titleTranslationKey:"@",useViewTitle:"<"},templateUrl:"scripts/details/projection-entity/projection-entity.component.html",controller:ProjectionEntityController}),angular.module("document-client").component("actionBox",{bindings:{sessionId:"<",userPromise:"<",documentPromise:"<",entitlementsPromise:"<",downloadAction:"&",onPropertyChange:"&",folderAction:"&",hasError:"<",messages:"<",messageDetailsAction:"&",propertiesActivated:"<",relationshipsActivated:"<",cdpAcceptanceMissing:"<",cdpAcceptanceMissingAction:"&"},templateUrl:"scripts/details/action-box/action-box.component.html",controller:ActionBoxController}),ActionBoxController.$inject=["$scope","documentPropertiesService","documentFolderModelService","documentControllerService","$window","userService","dialogFactory","$timeout","Analytics","downloadService","$filter","$translate","$q","sharedProfileService"],angular.module("document-client").directive("markDown",["lodash",function(){return{restrict:"A",template:"<!-- mark down -->",scope:{mdModel:"=",affectedDocuments:"<?",mdLinkClickCallback:"&?"},compile:function(a,b){function c(a,b){if(b.mdLinkClickCallback){var c=a.find("a");_.each(c,function(a){angular.element(a).on("click",function(a){a.preventDefault(),b.mdLinkClickCallback({link:_.get(a,"target.href"),text:_.get(a,"target.innerHTML")})})})}}return function(a,b){var d=a.mdModel;if(d){var e=marked(d),f={},g=a.affectedDocuments;g&&"undefined"!=g&&g.length>0&&(f={affectedDocuments:g}),e=Mustache.render(e,f),b.empty(),b.append(e),c(b,a)}}}}}]),angular.module("document-client").component("messageDetailsDialog",{bindings:{resolve:"<",close:"&",dismiss:"&"},templateUrl:"scripts/details/messages/message-details-dialog.component.html",controller:MessageDetailsDialogController}),MessageDetailsDialogController.$inject=["trackingService","$window"],angular.module("document-client").component("messageItem",{bindings:{message:"<",onOpen:"&"},templateUrl:"scripts/details/messages/message-item.component.html",controller:MessageItemController}),angular.module("document-client").component("messageList",{bindings:{messages:"<",onOpenMessage:"&"},templateUrl:"scripts/details/messages/message-list.component.html",controller:MessageListController}),angular.module("document-client").config(["$locationProvider","$routeProvider",function(a,b){b.when("/s/:sessionId",{redirectTo:function(a){return"/"+a.sessionId+"/preview"}}).when("/:sessionId",{redirectTo:function(a){return"/"+a.sessionId+"/details"}}).when("/:sessionId/preview",{templateUrl:"scripts/preview/preview.html",controller:"PreviewCtrl as $ctrl"}).when("/:sessionId/details",{templateUrl:"scripts/details/details.html",controller:"DetailsCtrl as $ctrl"}).otherwise({templateUrl:"views/error.html"}),a.html5Mode(!1)}]),angular.module("document-client").factory("RequestErrorHandler",["$q",function(a){return{responseError:function(b){var c=b.data||{};return c.httpStatus=b.status,c.httpMessage=b.statusText,a.reject(c)}}}]).config(["$httpProvider",function(a){a.interceptors.push("RequestErrorHandler")}]),angular.module("document-client").run(["$templateCache",function(a){a.put("views/error.html","<div class=page-container><div class=content-container><h1>{{::('document.error.generalTitle' | translate)}}</h1><p>{{::('document.error.general' | translate)}}</p><a class=\"button primary\" href=/d>{{::('document.nextButton' | translate)}}</a></div></div>"),a.put("scripts/components/dialog/dialog.component.html","<div class=modal-close ng-click=$ctrl.onClick()></div><h1 class=modal-title ng-if=$ctrl.settings.title>{{::$ctrl.settings.title}}</h1><p class=modal-message>{{::$ctrl.settings.message}}</p><div class=modal-options ng-if=$ctrl.settings.options><button class=button type=button ng-repeat=\"option in $ctrl.settings.options\" ng-click=$ctrl.onClick(option) ng-class=\"{'default':!option.primary, 'primary': option.primary && !$ctrl.settings.warning, 'danger': option.primary && $ctrl.settings.warning}\">{{option.label}}</button></div>"),a.put("scripts/components/title-input/title-input.component.html",'<div class=document-title><div ng-show=$ctrl.document.title><div ng-show=!$ctrl.isEditing><h1 class=is-editable ng-click=$ctrl.startEdit()><span ng-show=!$ctrl.document.customTitle>{{$ctrl.document.title}}</span> <span ng-show=$ctrl.document.customTitle title={{$ctrl.document.customTitle}}>{{$ctrl.document.customTitle}}</span></h1><div class=document-title-actions><button type=button ng-click=$ctrl.startEdit() ng-attr-title="{{\'document.details.editTitleLabel\' | translate}}"><i class="icon icon-pen"></i></button> <button type=button ng-click="$ctrl.isCloneDocumentDisabled || $ctrl.cloneDocument()" ng-disabled=$ctrl.isCloneDocumentDisabled ng-attr-title="{{\'document.details.cloneDocumentLabel\' | translate}}"><i class="icon icon-documents"></i></button> <button type=button ng-click=$ctrl.deleteDocument() ng-attr-title="{{\'document.details.deleteDocumentLabel\' | translate}}"><i class="icon icon-trash"></i></button></div></div><div ng-show=$ctrl.isEditing><form class=document-title-edit-form><div class=document-title-input-wrapper><input ng-model=$ctrl.customTitle class=document-title-input autofocus ng-keyup=$ctrl.onKeypress($event) focus-on event="focus:customTitle"></div><div class=document-title-actions-wrapper><button type=submit class=button ng-click=$ctrl.updateTitle()><i class="icon icon-checkmark"></i></button> <button type=button class=button ng-click=$ctrl.cancelEdit()><i class="icon icon-cross"></i></button></div><div class=clearfix></div></form></div><p class=document-title-original ng-show="$ctrl.document.customTitle && !$ctrl.isEditing">{{$ctrl.document.title}}</p></div><h1 ng-show=!$ctrl.document.title class=is-loading>{{\'document.details.isLoading\' | translate }}</h1></div>'),a.put("scripts/date-dialog/custom.datepicker.html","<div ng-switch=datepickerMode><div uib-daypicker template-url=scripts/date-dialog/custom.daypicker.html ng-switch-when=day tabindex=0 class=uib-daypicker></div><div uib-monthpicker template-url=scripts/date-dialog/custom.monthpicker.html ng-switch-when=month tabindex=0 class=uib-monthpicker></div><div uib-yearpicker template-url=scripts/date-dialog/custom.yearpicker.html ng-switch-when=year tabindex=0 class=uib-yearpicker></div></div>"),a.put("scripts/date-dialog/custom.daypicker.html",'<table role=grid aria-labelledby={{::uniqueId}}-title aria-activedescendant={{activeDateId}}><thead><tr><th><button type=button class="btn btn-default btn-sm pull-left uib-left" ng-click=move(-1) tabindex=-1><i aria-hidden=true class=icon-arrow-left></i><span class=sr-only>previous</span></button></th><th colspan="{{::5 + showWeeks}}"><button id={{::uniqueId}}-title role=heading aria-live=assertive aria-atomic=true type=button class="btn btn-default btn-sm uib-title" ng-click=toggleMode() ng-disabled="datepickerMode === maxMode" tabindex=-1><strong>{{title}}</strong></button></th><th><button type=button class="btn btn-default btn-sm pull-right uib-right" ng-click=move(1) tabindex=-1><i aria-hidden=true class=icon-arrow-right></i><span class=sr-only>next</span></button></th></tr><tr><th ng-if=showWeeks class=text-center></th><th ng-repeat="label in ::labels track by $index" class=text-center><small aria-label={{::label.full}}>{{::label.abbr}}</small></th></tr></thead><tbody><tr class=uib-weeks ng-repeat="row in rows track by $index" role=row><td ng-if=showWeeks class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td><td ng-repeat="dt in row" class="uib-day text-center" role=gridcell id={{::dt.uid}} ng-class=::dt.customClass><button type=button class="btn btn-sm" ng-class="::{\'btn-default\': !dt.secondary, \'secondary\': dt.secondary, \'current\': dt.current}" uib-is-class="\n            \'btn-info\' for selectedDt\n            on dt" ng-click=select(dt.date) ng-disabled=::dt.disabled tabindex=-1><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button></td></tr></tbody></table>'),a.put("scripts/date-dialog/custom.monthpicker.html",'<table role=grid aria-labelledby={{::uniqueId}}-title aria-activedescendant={{activeDateId}}><thead><tr><th><button type=button class="btn btn-default btn-sm pull-left uib-left" ng-click=move(-1) tabindex=-1><i aria-hidden=true class=icon-arrow-left></i><span class=sr-only>previous</span></button></th><th colspan={{::yearHeaderColspan}}><button id={{::uniqueId}}-title role=heading aria-live=assertive aria-atomic=true type=button class="btn btn-default btn-sm uib-title" ng-click=toggleMode() ng-disabled="datepickerMode === maxMode" tabindex=-1><strong>{{title}}</strong></button></th><th><button type=button class="btn btn-default btn-sm pull-right uib-right" ng-click=move(1) tabindex=-1><i aria-hidden=true class=icon-arrow-right></i><span class=sr-only>next</span></button></th></tr></thead><tbody><tr class=uib-months ng-repeat="row in rows track by $index" role=row><td ng-repeat="dt in row" class="uib-month text-center" role=gridcell id={{::dt.uid}} ng-class=::dt.customClass><button type=button class="btn btn-default" uib-is-class="\n            \'btn-info\' for selectedDt\n            on dt" ng-click=select(dt.date) ng-disabled=::dt.disabled tabindex=-1><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button></td></tr></tbody></table>'),a.put("scripts/date-dialog/custom.yearpicker.html",'<table role=grid aria-labelledby={{::uniqueId}}-title aria-activedescendant={{activeDateId}}><thead><tr><th><button type=button class="btn btn-default btn-sm pull-left uib-left" ng-click=move(-1) tabindex=-1><i aria-hidden=true class=icon-arrow-left></i><span class=sr-only>previous</span></button></th><th colspan="{{::columns - 2}}"><button id={{::uniqueId}}-title role=heading aria-live=assertive aria-atomic=true type=button class="btn btn-default btn-sm uib-title" ng-click=toggleMode() ng-disabled="datepickerMode === maxMode" tabindex=-1><strong>{{title}}</strong></button></th><th><button type=button class="btn btn-default btn-sm pull-right uib-right" ng-click=move(1) tabindex=-1><i aria-hidden=true class=icon-arrow-right></i><span class=sr-only>next</span></button></th></tr></thead><tbody><tr class=uib-years ng-repeat="row in rows track by $index" role=row><td ng-repeat="dt in row" class="uib-year text-center" role=gridcell id={{::dt.uid}} ng-class=::dt.customClass><button type=button class="btn btn-default" uib-is-class="\n            \'btn-info\' for selectedDt\n            on dt" ng-click=select(dt.date) ng-disabled=::dt.disabled tabindex=-1><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button></td></tr></tbody></table>'),
a.put("scripts/date-dialog/date-dialog.component.html","<div class=modal-close ng-click=$ctrl.cancel()></div><h1 sl-markdown text=$ctrl.caption></h1><p><strong>{{::('document.dialog.dateSelect.bodyMessage' | translate)}}</strong>&nbsp;{{$ctrl.selectedDate | date:'mediumDate'}}</p><div uib-datepicker ng-model=$ctrl.selectedDate template-url=scripts/date-dialog/custom.datepicker.html datepicker-options=$ctrl.datepickerOptions></div><div class=modal-options><a class=\"button default\" ng-click=$ctrl.cancel()>{{::('document.dialog.dateSelect.buttonLabelCancel' | translate)}}</a> <a class=\"button primary\" ng-click=$ctrl.ok()>{{::('document.dialog.dateSelect.buttonLabelConfirm' | translate)}}</a></div>"),a.put("scripts/details/action-box/action-box.component.html",'<div class=action-box-component ng-if=$ctrl.loaded><div class="action-box fade" ng-class="{\'in\' : $ctrl.visible, \'out\' : !$ctrl.visible}"><div class=action-box-container><div class=action-box-icon><i ng-class=$ctrl.actionBox.icon></i></div><div class=action-box-message><h3 sl-markdown text="$ctrl.actionBox.title | translate"></h3><p sl-markdown text="$ctrl.actionBox.message | translate : $ctrl.tenantContactData"></p></div><div ng-if=$ctrl.actionBox.action.visible class=action-box-action><div ng-switch on=$ctrl.actionBox.action.type><div ng-switch-when=dropdown class=dropdown-wrapper uib-dropdown ng-class="{\'is-loading\': !$ctrl.actionBox.action.options.length}"><a class="button primary with-caret" uib-dropdown-toggle>{{$ctrl.actionBox.action.label | translate}}</a><div class=dropdown-menu uib-dropdown-menu><ul class=dropdown-menu-list><li ng-repeat="option in $ctrl.actionBox.action.options"><a ng-href={{option.url}} ng-class="{\'disabled\': option.disabled}" ng-click="$ctrl.actionBox.action.callback($event, option)">{{option.label}}</a></li></ul></div></div><a ng-switch-default class="button primary" ng-click=$ctrl.actionBox.action.callback()>{{$ctrl.actionBox.action.label | translate}}</a></div></div></div></div></div>'),a.put("scripts/details/details-data/details-data.component.html",'<div class="expandable-section details-data"><a class=expandable-section-trigger ng-class="{\'is-collapsed\': !$ctrl.showInformationSection, \'is-loading\': $ctrl.showInformationSection && !$ctrl.projections}" ng-click="$ctrl.showInformationSection = !$ctrl.showInformationSection">{{::(\'document.details.section.information\' | translate)}}</a><div class="expandable-section-content document-data" ng-if="$ctrl.projections.length > 0" ng-show=$ctrl.showInformationSection><sl-projection-entity class=document-terms-and-conditions title-translation-key=document.details.projections.title.termsAndConditions projections=$ctrl.projectionClasses.termsAndConditions ng-if="$ctrl.projectionClasses.termsAndConditions.length > 0"></sl-projection-entity><sl-projection-entity class=document-subjects title-translation-key=document.details.projections.title.subjects projections=$ctrl.projectionClasses.subjects use-view-title=true ng-if="$ctrl.projectionClasses.subjects.length > 0"></sl-projection-entity><sl-projection-entity class=document-objects title-translation-key=document.details.projections.title.objects projections=$ctrl.projectionClasses.objects ng-if="$ctrl.projectionClasses.objects.length > 0"></sl-projection-entity></div><div class=expandable-section-content ng-if="$ctrl.projections.length === 0 && $ctrl.showInformationSection && $ctrl.isProjectionsActivated()"><p>{{::(\'document.details.projections.emptyState\' | translate)}}</p></div><div class=expandable-section-actions ng-if=!$ctrl.hasError ng-show="$ctrl.editAllowed && $ctrl.showInformationSection && $ctrl.isProjectionsActivated()"><a href="" ng-click=$ctrl.editDocument()>{{::(\'document.details.projections.edit\' | translate)}}</a></div><div class="expandable-section-content document-data" ng-if="$ctrl.properties.length > 0" ng-show=$ctrl.showInformationSection><sl-projection-entity class=document-properties title-translation-key=document.details.projections.title.properties projections=$ctrl.properties></sl-projection-entity></div></div>'),a.put("scripts/details/details-preview/details-preview.component.html",'<div class=document-assets><div class=document-preview ng-class="{\'is-loading\': $ctrl.isPreviewLoading}"><div ng-show=$ctrl.document><div class="document-placeholder error" ng-if=$ctrl.hasError></div><div class=document-placeholder ng-if="!$ctrl.hasError && $ctrl.previewImage === false"><div class=document-placeholder-content ng-if="!$ctrl.hasError && !$ctrl.isDocumentInvalid"><h3>{{\'document.details.inProgress\' | translate}}</h3><a class="button default" ng-click=$ctrl.editDocument($event) ng-if=$ctrl.editAllowed>{{\'document.details.continue\' | translate}}</a></div><div class=document-placeholder-invalid-content ng-if=$ctrl.isDocumentInvalid><div class=document-placeholder-invalid-inner><div><i class=icon-circle-cross></i></div><p class=invalid-document-message>{{\'document.details.invalidDocumentLabel\' | translate}}</p></div></div></div><div ng-if="!$ctrl.hasError && $ctrl.previewImage"><img ng-src={{$ctrl.previewImage}} on-image-load=$ctrl.previewLoaded() on-image-error=$ctrl.previewLoadError() height=auto width="100%"><div class=document-options ng-click=$ctrl.zoomIn($event)><a class="document-option option-edit" ng-click=$ctrl.editDocument($event) aria-label="{{\'document.details.edit\' | translate}}" ng-if=$ctrl.editAllowed ng-class="{\'disabled\': $ctrl.editDisabled || $ctrl.isDocumentInvalid}"></a> <span ng-repeat="format in $ctrl.downloadFormats" ng-if="!($ctrl.downloadDisabled && !$ctrl.isDocumentInvalid)"><a class="document-option option-download-{{format.name}}" ng-if=format.canDownload ng-href={{format.url}} ng-class="{\'disabled\': $ctrl.downloadDisabled || $ctrl.isDocumentInvalid}" ng-click="$ctrl.startDownload($event, format.name)" aria-label={{format.name}}></a> <a class="document-option option-download-{{format.name}}" ng-if="format.canDownload === false" href=# ng-class="{\'disabled\': true}" ng-click="$ctrl.downloadNotEntitled($event, format.name)" aria-label={{format.name}}></a></span> <a class=document-option ng-click=$ctrl.zoomIn($event) aria-label="{{\'document.details.zoomIn\' | translate}}"><i class="icon icon-zoom-in"></i></a></div></div></div></div></div>'),a.put("scripts/details/details.html",'<div class=page-container><section class=document-view><sl-document-folder-view class=folder-view-wrapper ng-click=$ctrl.documentFolderViewClick() document-folder-model=$ctrl.documentFolderModel on-document-folder-selected=$ctrl.documentFolderSelected(folder) ng-if=$ctrl.isRelationshipsActivated()></sl-document-folder-view><div class=title-input-container><sl-title-input document=$ctrl.document session-id=$ctrl.sessionId clone-document=$ctrl.cloneDocument() is-clone-document-disabled=$ctrl.isCloneDocumentDisabled delete-document=$ctrl.deleteDocument()></sl-title-input></div><action-box session-id=$ctrl.sessionId user-promise=$ctrl.userPromise document-promise=$ctrl.documentPromise entitlements-promise=$ctrl.entitlementsPromise download-action="$ctrl.downloadAction(event, format)" on-property-change=$ctrl.onPropertyChange() folder-action=$ctrl.folderActionBoxCall() has-error=$ctrl.hasError messages=$ctrl.messages message-details-action=$ctrl.openMessageDetails(message) properties-activated=$ctrl.isPropertiesActivated() relationships-activated=$ctrl.isRelationshipsActivated() cdp-acceptance-missing=$ctrl.isCdpAcceptanceMissing() cdp-acceptance-missing-action=$ctrl.getCdpAcceptance()></action-box><sl-details-preview session-id=$ctrl.sessionId document=$ctrl.document entitlements=$ctrl.entitlements user=$ctrl.user has-error=$ctrl.hasError on-error=$ctrl.setError(error) on-download-format-ready=$ctrl.setDownloadFormats(downloadFormats) cdp-acceptance-missing=$ctrl.isCdpAcceptanceMissing()></sl-details-preview><div class=document-details><span ng-if="$ctrl.isProjectionsActivated() || $ctrl.isPropertiesActivated()"><sl-details-data session-id=$ctrl.sessionId document-promise=$ctrl.documentPromise entitlements-promise=$ctrl.entitlementsPromise has-error=$ctrl.hasError on-edit=$ctrl.editDocument() projections-activated=$ctrl.isProjectionsActivated() properties-activated=$ctrl.isPropertiesActivated()></sl-details-data></span> <span ng-if=$ctrl.isMessagesActivated()><message-list messages=$ctrl.messages on-open-message="$ctrl.openMessageDetailsFromList(message)"></span></div></section></div>'),a.put("scripts/details/document-folder-view/document-folder-selection-modal.html",'<a class=modal-close ng-click=$ctrl.cancel()></a><h1 class=modal-title>{{\'document.details.folderSelection.header\' | translate}}</h1><p class=modal-message>{{\'document.details.folderSelection.content\' | translate}}</p><div class="documentFolderViewModal section"><div class=custom-select custom-select><select ng-model=$ctrl.selectedFolderId ng-class="{\'is-unselected\' : !$ctrl.selectedFolderId}"><!--ng-focus="modal.onSelectClick(modal)">--><option value="" disabled selected>{{\'document.details.folderSelection.selectFolder\'| translate}}</option><optgroup label="{{\'document.details.folderSelection.newFolders\'| translate}}"><option ng-value=folder.id ng-repeat="folder in $ctrl.newFolders | lascaSort:\'title\'">{{folder.title}}</option></optgroup><optgroup label="{{\'document.details.folderSelection.availableFolders\' | translate}}" ng-if=$ctrl.availableFolders.length><option ng-value=folder.id ng-repeat="folder in  $ctrl.availableFolders | lascaSort:\'customTitle\'">{{folder.customTitle}}</option></optgroup></select></div></div><div class=modal-options><a class="button default" ng-click=$ctrl.cancel()>{{\'document.details.folderSelection.cancel\' | translate}}</a> <a class="button primary" ng-click="$ctrl.selectedFolderId && $ctrl.confirm()" ng-disabled=!$ctrl.selectedFolderId>{{\'document.details.folderSelection.confirm\' | translate}}</a></div>'),a.put("scripts/details/document-folder-view/document-folder-view-component.html","<div ng-if=$ctrl.documentFolderModel><a class=folder-view href=# ng-click=$ctrl.folderClick($event) ng-class=\"{'bound-folder':$ctrl.boundFolder,'select-folder':!$ctrl.boundFolder}\"><i class=\"icon icon-folder\" ng-if=$ctrl.boundFolder></i> <span>{{$ctrl.boundFolder ? $ctrl.boundFolder.customTitle : ('document.details.folderSelection.openFolderSelection'| translate)}}</span></a></div>"),a.put("scripts/details/messages/message-details-dialog.component.html",'<div ng-if=$ctrl.message><a class=modal-close ng-click=$ctrl.dismiss()></a><div class=message-details-container><div class=message-details><h3>{{$ctrl.message.title}}</h3><span class=message-date>{{$ctrl.message.dateReceived | date:\'mediumDate\'}}</span><p class=message-summary mark-down md-link-click-callback="$ctrl.onMessageLinkClick(link, text)" md-model=$ctrl.message.summary></p><p class=message-body mark-down md-link-click-callback="$ctrl.onMessageLinkClick(link, text)" md-model=$ctrl.message.body affected-documents=$ctrl.message.affectedDocuments></p></div><div class=message-actions-section><div class=message-actions><span class=message-action ng-class=$ctrl.statusClass></span></div></div></div><div class=modal-options><a class="button default" ng-click=$ctrl.archiveAction()>{{\'document.dialog.messageDetails.buttonLabelArchive\' | translate}}</a> <a class="button primary" ng-click=$ctrl.closeOverlay()>{{\'document.dialog.messageDetails.buttonLabelClose\'| translate}}</a></div></div>'),a.put("scripts/details/messages/message-item.component.html","<div class=message-item ng-class=\"{ 'alert': $ctrl.isAlert(), 'notification': !$ctrl.isAlert(), 'read': $ctrl.isRead()}\"><div class=message-date>{{$ctrl.message.dateReceived | date:'mediumDate'}}</div><div class=message-link ng-click=$ctrl.onOpen()>{{$ctrl.message.title}}</div></div>"),a.put("scripts/details/messages/message-list.component.html",'<div class="expandable-section message-list"><a class=expandable-section-trigger ng-class="{\'is-collapsed\': !$ctrl.showMessagesSection, \'is-loading\': $ctrl.showMessagesSection && !$ctrl.messages}" ng-click="$ctrl.showMessagesSection = !$ctrl.showMessagesSection">{{::(\'document.details.section.notifications.title\' | translate)}}</a><div class="expandable-section-content message-list-data" ng-show=$ctrl.showMessagesSection><p class=description>{{::(\'document.details.section.notifications.description\' | translate)}}</p><div class=description ng-if="!($ctrl.messages.length > 0)" sl-widget=no-messages-widget sl-description=no-messages-widget sl-target=document-adapter></div><div ng-if="$ctrl.messages.length > 0"><message-item ng-repeat="msg in $ctrl.messages | orderBy:\'dateReceived\':true" message=msg on-open="$ctrl.onOpenMessage({message: msg})"></div></div></div>'),a.put("scripts/details/projection-entity/projection-entity.component.html",'<div><h4>{{::($ctrl.titleTranslationKey | translate)}}</h4><ul class=attribute-list><li ng-repeat="projection in $ctrl.projections | orderBy : \'type\'"><div ng-repeat="attribute in projection.attributes | orderBy : \'rank\'" class=attribute-item><div ng-if=::!$ctrl.useViewTitle><em>{{::attribute.label}}:</em> <span>{{::attribute.value}}</span></div><div ng-if=::$ctrl.useViewTitle><em ng-if="$index === 0">{{::projection.view}}:</em> <span ng-class="{\'attribute-item-span\': $index > 0}">{{::attribute.value}}</span></div></div></li></ul></div>'),a.put("scripts/document-preview-dialog/document-preview-dialog.component.html",'<div class=document-preview-dialog><div class=preview-document-container id=document-preview-container><div class=preview-document-controls-pages ng-show=$ctrl.currentImage><pager total-items=$ctrl.pages.length page=$ctrl.currentPage items-per-page=1 previous-text="" next-text="" on-select-page=$ctrl.setImage(page)></pager></div><div class="preview-document-overlay is-paid" sl-preview-urls-spinner=""></div><img id=document-preview-image ng-src={{$ctrl.currentImage}} image-spinner width=100% height=auto></div><div class=document-options ng-click=$ctrl.nextPage() ng-swipe-left=$ctrl.swipeLeft() ng-swipe-right=$ctrl.swipeRight()><a class=document-option ng-click=$ctrl.cancel($event) aria-label="{{\'document.details.close\' | translate}}"><i class="icon icon-cross"></i></a> <a class="document-option option-edit" ng-click=$ctrl.editDocument() aria-label="{{\'document.details.edit\' | translate}}" ng-if=$ctrl.editAllowed ng-class="{\'disabled\': $ctrl.editDisabled || $ctrl.document.invalid}"></a> <span ng-repeat="format in $ctrl.downloadFormats" ng-if="!($ctrl.downloadDisabled && !$ctrl.document.invalid)"><a class="document-option option-download-{{format.name}}" ng-if=format.canDownload ng-href={{format.url}} ng-class="{\'disabled\': $ctrl.downloadDisabled || $ctrl.document.invalid}" ng-click="$ctrl.startDownload($event, format.name)" aria-label={{format.name}}></a></span></div></div>'),a.put("scripts/document-preview/document-preview.component.html",'<div class=preview-document><div class="preview-document-container error" ng-if=$ctrl.hasError></div><div class=preview-document-container id=document-preview-container ng-if=!$ctrl.hasError><a class=preview-document-trust-ribbon ng-if=$ctrl.showGuaranteeSeal ng-click=$ctrl.trustRibbonClicked() ng-mouseover=$ctrl.trustRibbonHovered() ng-mouseleave=$ctrl.trustRibbonUnhovered()></a><div class=preview-document-controls-edit><a ng-if="$ctrl.editAllowed && !$ctrl.isInvalid" ng-click=$ctrl.editDocument($event)></a></div><div class=preview-document-controls-pages ng-show=$ctrl.currentImage ng-if=$ctrl.isPageFlippingEnabled()><pager total-items=$ctrl.pages.length page=$ctrl.currentPage items-per-page=1 previous-text="" next-text="" on-select-page=$ctrl.setImage(page)></pager></div><div class="preview-document-overlay is-paid" sl-preview-urls-spinner=""></div><a ng-href={{$ctrl.getDownloadUrl()}} ng-click=$ctrl.startDownload($event) download={{$ctrl.sessionId}}.{{$ctrl.formats[0]}} ng-if="$ctrl.isPreviewImageDownloadActivated() && $ctrl.isDownloadAllowed()" class=downloadActive><div class=preview-document-download-ribbon><i class="preview-document-download-icon icon icon-download"></i><div class=preview-document-download-text>{{\'document.linkLabelDownloadForFree\'| translate}}</div></div><img id=document-preview-image ng-src={{$ctrl.currentImage}} image-spinner width=100% height=auto ng-swipe-left=$ctrl.nextPage() ng-swipe-right=$ctrl.previousPage() class=opacity></a> <img id=document-preview-image ng-src={{$ctrl.currentImage}} image-spinner width=100% height=auto ng-click=$ctrl.nextPage() ng-swipe-left=$ctrl.nextPage() ng-swipe-right=$ctrl.previousPage() ng-if="!$ctrl.isPreviewImageDownloadActivated() || !$ctrl.isDownloadAllowed()"></div></div>'),a.put("scripts/email-confirm-dialog/email-confirm-dialog.component.html","<div class=modal-close ng-click=$ctrl.cancel()></div><div sl-widget=email-confirmation-widget sl-model=$ctrl.emailConfirmationWidgetModel sl-description=email-confirmation-widget sl-target=document-adapter></div><div class=modal-options><a class=\"button default\" ng-click=$ctrl.cancel()>{{'document.dialog.confirmEmail.buttonLabelCancel' | translate}}</a> <a class=\"button primary\" ng-click=$ctrl.resendConfirmationEmail()>{{'document.dialog.confirmEmail.buttonLabelResend' | translate}}</a></div>"),a.put("scripts/guarantee-seal-dialog/guarantee-seal-dialog.component.html",'<div class=modal-close ng-click=$ctrl.cancel()></div><div sl-widget=guarantee-seal-overlay-widget sl-model="" sl-description=guarantee-seal-overlay-widget sl-target=document-adapter></div><div class=modal-options><a class="button primary" ng-click=$ctrl.ok()>{{\'document.dialog.guaranteeSeal.buttonLabelClose\' | translate}}</a></div>'),a.put("scripts/preview/author-information/author-information.component.html","<div class=author-information><h3>{{'document.author.title' | translate}}</h3><div class=author-information-content><div class=author-information-image-container ng-if=$ctrl.author.imageUrl><img ng-src=\"{{$ctrl.author.imageUrl}}\"></div><div class=author-information-details><h4>{{$ctrl.author.name}}</h4><p>{{$ctrl.author.profession}}</p></div></div></div>"),a.put("scripts/preview/download-and-purchase/download-and-purchase.component.html",'<!-- contact support button--><div class="preview-details-content preview-details-regular" ng-if=$ctrl.hasError><p>{{\'document.error.previewGenerationErrorMessage\' | translate:$ctrl.tenantContactData}}</p><a class="button primary preview-details-proceed" ng-if=$ctrl.zenDeskEnabled ng-click=$ctrl.openSupportWidget()>{{::(\'document.error.buttonPrimary\' | translate)}}</a></div><!-- contact support button--><a name=download-options ng-if=!$ctrl.hasError></a><!-- Info shown when there are some problems occurred --><div class="preview-details-content preview-details-regular" ng-if="!$ctrl.hasError && $ctrl.isInvalid === true"><h3 class=preview-details-headline>{{\'document.alert.invalidDocument.title\' | translate}}</h3><p>{{\'document.alert.invalidDocument.messageFinished\' | translate}}</p><a class="button primary preview-details-proceed" ng-click=$ctrl.createDocument()>{{::(\'document.alert.invalidDocument.buttonPrimary\' | translate)}}</a></div><!-- Info shown when there are some problems occurred --><!-- Boxes with options one day and subscription--><div ng-if="!$ctrl.hasError && $ctrl.areEntitlementsLoaded === true && $ctrl.isProposePurchase === true && !$ctrl.isInvalid"><!-- Plan Boxes with options one day and subscription--><div ng-if="$ctrl.showProductSelection === true"><h3 class=preview-details-plan-box-header>{{\'document.planBoxHeader\' | translate}}</h3><sl-plan-box session-id=$ctrl.sessionId title="\'document.purchase.subscription.title\' | translate" translate-attr="{title: \'document.purchase.subscription.title\'}" subtitle="\'document.purchase.subscription.subtitle\' | translate" product=$ctrl.bestSubscriptionProduct product-benefits=$ctrl.subscriptionProductBenefitsSnippet document=$ctrl.document is-primary=true button-label-key=document.purchase.subscription.c2aLabel show-label-without-price="$ctrl.subscriptionProducts.length > 1" ng-if=$ctrl.bestSubscriptionProduct></sl-plan-box><div class=plan-details-product-selection ng-if="$ctrl.subscriptionProducts.length > 1"><select ng-click=$ctrl.openOptions() ng-blur=$ctrl.closeOptions() ng-keyup=$ctrl.onKeypress($event) ng-model=$ctrl.bestSubscriptionProduct ng-options="$ctrl.getNiceSubscriptionProductName(product) for product in $ctrl.subscriptionProducts" ng-change=$ctrl.updateBestSubscriptionProductAndTrackChangeEvent($ctrl.bestSubscriptionProduct)></select></div><div class=preview-details-separator ng-if=$ctrl.bestOneTimeProduct><span class=preview-details-separator-text>{{\'document.orSeparator\' | translate}}</span></div><sl-plan-box session-id=$ctrl.sessionId title="\'document.purchase.oneTime.title\' | translate" translate-attr="{title:\'document.purchase.oneTime.title\'}" product=$ctrl.bestOneTimeProduct product-benefits=$ctrl.oneTimeProductBenefitsSnippet document=$ctrl.document is-primary=false button-label-key=document.purchase.oneTime.c2aLabel ng-if=$ctrl.bestOneTimeProduct></sl-plan-box></div><div class="preview-details-content preview-details-download" ng-if="$ctrl.showProductSelection === undefined"><h3 class=preview-details-headline>{{\'document.products.loading.header\' | translate}}</h3><p>{{\'document.products.loading.details\' | translate}}</p><div class=entitlements-spinner></div></div></div><!-- Boxes with options one day and subscription--><!-- Download Button when user has permission--><div class="preview-details-content preview-details-download" ng-if="!$ctrl.hasError && $ctrl.areEntitlementsLoaded === true && $ctrl.isProposePurchase === false && !$ctrl.isInvalid"><h3 class=preview-details-headline>{{\'document.linkLabelDownload\' | translate}}</h3><ul class=preview-details-download-list><li class=is-selected><h4 class=preview-details-download-item-headline>{{$ctrl.document.title}}</h4><a ng-repeat="format in $ctrl.document.formats" class=preview-details-download-item-file target=_blank download={{$ctrl.sessionId}}.{{format}} href="{{$ctrl.baseUrl}}/download/{{$ctrl.sessionId}}{{ $ctrl.isPackagedDownload ? \'/archive\' : \'\' }}?contentType={{ $ctrl.documentFormatToMimeType(format) }}" ng-if=$ctrl.canDownloadFormat(format) ng-click="$ctrl.startDownload($event, format)"><span class="img-file-{{format | lowercase}}"></span></a></li></ul><p ng-if=$ctrl.isPackagedDownload class=preview-details-help ng-translate=[html]document.textLabelDownloadPackage></p><a href=javascript:void(0) ng-if="$ctrl.document.forwardDocumentEnabled === true" class=share-document-link ng-click=$ctrl.onShare()>{{\'document.linkLabelShareDocument\'| translate}}</a><p class=preview-details-help ng-translate=[html]document.textLabelDownloadPDFReader></p></div><!-- END Download Button when user has permission--><!-- Zen desk chat in case of error when loading entitlements --><div class="preview-details-content preview-details-download" ng-if="!$ctrl.hasError && $ctrl.downloadEntitlementWithErrors && !$ctrl.isInvalid"><h3 class=preview-details-headline>{{\'document.entitlements.error.header\' | translate}}</h3><p>{{\'document.entitlements.error.details\' | translate}}</p><a class="button primary preview-details-proceed" ng-if=$ctrl.zenDeskEnabled ng-click=$ctrl.openSupportWidget()>{{::(\'document.error.buttonPrimary\' | translate)}}</a></div><!-- Information about loading entitlements --><div class="preview-details-content preview-details-download" ng-if="!$ctrl.hasError  && !$ctrl.areEntitlementsLoaded && !$ctrl.isInvalid"><h3 class=preview-details-headline>{{\'document.entitlements.loading.header\' | translate}}</h3><p>{{\'document.entitlements.loading.details\' | translate}}</p><div class=entitlements-spinner></div></div>'),a.put("scripts/preview/plan-box/plan-box.component.html","<div class=preview-details-plan-box ng-class=\"{'is-primary': $ctrl.isPrimary}\"><div class=preview-details-plan-box-content><h2>{{::$ctrl.title}}</h2><h3 class=plan-box-subtitle ng-if=$ctrl.subtitle>{{::$ctrl.subtitle}}</h3><a class=button href=\"\" ng-click=$ctrl.gotoCheckout($ctrl.product.ratePlanId)>{{::($ctrl.buttonLabelKey | translate)}}</a><div ng-bind-html=$ctrl.productBenefits ng-if=$ctrl.productBenefits class=preview-details-plan-box-benefits></div><span class=price ng-switch=\"$ctrl.product.freeTrialDays > 0\"><span ng-switch-when=true>0 {{$ctrl.product.charge.currency}}</span> <span ng-switch-default>{{$ctrl.product.charge.price | money : $ctrl.product.charge.currency}} <span class=price-postfix>{{'document.inclVat' | translate}}</span></span></span></div><div class=trial ng-if=\"$ctrl.product.freeTrialDays > 0\"><span ng-if=$ctrl.showLabelWithoutPrice>{{'document.purchase.subscription.trialLabelWithoutPrice' | translate}}</span> <span ng-if=!$ctrl.showLabelWithoutPrice>{{'document.purchase.subscription.trialLabel' | translate | stringFormat : $ctrl.product.freeTrialDays : ($ctrl.product.charge.price | money : $ctrl.product.charge.currency)}}</span></div></div>"),a.put("scripts/preview/preview.html",'<section class=document-view ng-if="$ctrl.viewMode != \'READY\'"><div class=document-title><h1 class=is-loading>{{\'document.details.isLoading\' | translate}}</h1></div></section><div class=page-container ng-if="$ctrl.viewMode == \'READY\'"><div class="content-container canonical-name-{{$ctrl.document.canonicalName}}"><div class=title-input-container><sl-title-input ng-if=$ctrl.showTitleInput document=$ctrl.document session-id=$ctrl.sessionId clone-document=$ctrl.cloneDocument() is-clone-document-disabled=$ctrl.isCloneDocumentDisabled delete-document=$ctrl.deleteDocument()></sl-title-input></div><div class=main-container><div class=preview-details-box ng-if=$ctrl.showMarketingWidget() sl-widget=marketing-widget sl-model=$ctrl.marketingWidgetModel sl-description=marketing-widget sl-target=document-adapter></div><!-- MouseflowExcludeStart --><sl-document-preview document-promise=$ctrl.documentPromise entitlements-promise=$ctrl.entitlementsPromise document-canonical-name=$ctrl.document.canonicalName session-id=$ctrl.sessionId has-error=$ctrl.hasError on-error=$ctrl.setError(error)></sl-document-preview><!-- MouseflowExcludeEnd --><sl-download-and-purchase class="preview-details-box download-and-purchase-box" document-promise=$ctrl.documentPromise entitlements-promise=$ctrl.entitlementsPromise session-id=$ctrl.sessionId has-error=$ctrl.hasError on-error=$ctrl.setError(error) on-share=$ctrl.onShareDocument()></sl-download-and-purchase><div class=preview-details-box sl-widget=payment-options sl-model=$ctrl.optionsWidgetModel sl-description=payment-options sl-target=document-adapter></div><sl-author-information class=preview-details-box ng-if=$ctrl.document.author author=$ctrl.document.author></sl-author-information></div></div></div>'),a.put("scripts/share-document-dialog/share-document.component.html","<div class=modal-close ng-click=$ctrl.dismiss()></div><div class=share-document><h1>{{'document.dialog.shareDocument.title' | translate}}</h1><p>{{'document.dialog.shareDocument.description' | translate}}</p><form name=message-form novalidate><textarea name=message placeholder=\"{{'document.dialog.shareDocument.customMessage.placeholder' | translate}}\" ng-model=$ctrl.message></textarea></form></div><div class=modal-options><a class=\"button default\" ng-click=$ctrl.dismiss()>{{'document.dialog.shareDocument.buttonLabelCancel' | translate}}</a> <a class=\"button primary\" ng-click=$ctrl.submit()>{{'document.dialog.shareDocument.buttonLabelSubmit' | translate}}</a></div>")}]);